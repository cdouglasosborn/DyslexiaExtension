{"version":3,"sources":["scripts/contentscript.js"],"names":["autocharlie","constants","CLASS_NAME_PREFIX","ClassName","MODAL_HEADER","MODAL_FOOTER","MODAL_CONTENT","MODAL_CONTAINER","FAB","CARD","LIGHT_BOX","DARK_BOX","BUTTON","LEFT_ICON_CONTAINER","RIGHT_ICON_CONTAINER","INNER_HEADER","RIGHT_ICON","LEFT_ICON","TABS_CONTAINER","TAB","TAB_INDICATOR","TABS_DIVS_CONTAINER","TABS_DIV","TABS_DIVS_INNER","PADDING","Copy","SUBMIT_FEEDBACK","SEND","FEEDBACK","EMAIL_ADDRESS","ID_NAME_PREFIX","Id","HEADER_CONTAINER","FOOTER_CONTAINER","CONTENT_CONTAINER","FEEBACK_INPUT","FEEBACK_EMAIL","IMAGE_FOLDER","Images","HEADER_LOGO","HEADER_HAMBURGER","HEADER_CLOSE","HEADER_FEEDBACK","Message","SEND_FEEDBACK","Names","APP","services","PasteInterceptor","elem","callback","propagate","this","prototype","addEventListener","e","preventDefault","text","originalEvent","clipboardData","getData","bind","ui","Container","body","containerDiv","document","createElement","header","Header","content","Content","footer","Footer","className","appendChild","init","setHeader","show","style","display","hide","get","getHeader","getContent","getFooter","parent","clear","innerHTML","remove","parentNode","removeChild","Fab","modalFooter","id","innerHeader","clearIcons","newLogo","src","chrome","extension","getURL","leftIcons","rightIcons","addMenuBtn","addLeftIcon","HAMBURGER","iconUrl","optCallback","optClass","newIcon","additionalClass","addCloseButton","addFeedbackButton","addRightIcon","lightbox","LightBox","feedbackInput","console","log","details","Input","FEEDBACK_INPUT","email","FEEDBACK_EMAIL","submitButton","gottenEmail","getElementById","value","gottenFeedback","createdFeedback","feedback","runtime","sendMessage","method","response","HEADER_LEFT_ICONS","HEADER_RIGHT_ICONS","placeholder","container","CONTAINER","LABEL","INPUT","FOCUSED","label","input","getInput","closeCallback","darkBoxHide","lightBox","darkBox","headerText","Tabs","insertionDiv","tabDetails","tabsContainer","i","length","createTabButton","indicator","width","left","tabsDivContainer","tabsInnerDivContainer","j","actualTab","actualTabDiv","div","tab","tabDiv","button","name","y","x","transform","dyslexiaextension","TURN_ON_FONT","TURN_OFF_FONT","GET_FONT","TURN_ON_BACKGROUND","TURN_OFF_BACKGROUND","GET_BACKGROUND","GET_INIT","Constants","EXAMPLE","SIG_HTML","SIGNATURES","RULES","RULES_PREVIEW","ID_PREFIX","Ids","TOOLBAR","TEXTAREA","IMAGE_DIRECTORY","controllers","HomeCtrl","currentMessage","signatureList","HELP","EMPATHY","WELCOME","EMPATHY_WELCOME","FONTS","FONTS_HELP","SCRIPTS","SCRIPTS_HELP","ADD_TO_PAGE","BACKGROUND_COLOR","Class","ON_BUTTON","OFF_BUTTON","BACKGROUND_OFF_BUTTON","BACKGROUND_ON_BUTTON","font","PASTEL_COLORS","hex","EMPATHY_FONTS","Urls","LOG_IN","helpList","empathyList","tabsInfo","active","setupHelpList","setupEmpathyList","welcomeText","colorHeader","colorContainer","addColorToUi","fontHeader","fontHelp","fontContainer","addFontToUi","bgContainer","backgroundname","fontTR","fontTDName","fontActualTDAdd","fontTDAdd","setBackground","insertOntoBody","fontActualTDOn","fontTDOn","getBackground","fontActualTDOff","fontTDOff","color","onButtons","getElementsByClassName","offButtons","removeBackground","fontname","setFont","getFont","removeFont","scriptHeader","scriptHelp","dyslexiaSimulationButton","jqueryNode","crossorigin","headID","getElementsByTagName","onload","scriptNode","modules","Tts","voices","voice","canHighlightText","elToRead","elBeingRead","textBeingRead","utterance","lastHoveredEl","buttonEl","buttonShown","PREFERRED_VOICE_NAME","VOICE_SPEED","HIGHLIGHT_ID","HOVER_DURATION_MS","window","speechSynthesis","onvoiceschanged","getVoices","runExtension","setVoice","renderButton","attachListeners","firstLocalVoice","localService","readEl","hideButton","handleMouseMove","hideButtonFast","newHoveredEl","elementFromPoint","clientX","clientY","hoveredElAtTimerStart","setTimeout","textNode","getTextNode","showButtonNear","opacity","pointerEvents","el","rect","getBoundingClientRect","top","height","nodeType","Node","TEXT_NODE","childNodes","onend","cleanUp","cancel","textContent","trim","SpeechSynthesisUtterance","rate","onboundary","highlightNextPhrase","charIndex","onerror","speak","removeHighlights","highlightSpan","querySelector","insertAdjacentHTML","normalize","startIdx","remainingText","substr","endIdx","search","range","createRange","setStart","setEnd","surroundContents","showing","scrappedBody","addComposeListener","ctrl","background","reading","addListener","toggle","stopPropagation","onMessage","request","getEnabled","GET_ENABLED","enabled","checkLoad","insertFontOntoElements","element","insertFontOntoElement","subElements","computedStyle","defaultView","getComputedStyle","backgroundColor","removeAttribute","fontFamily","subtreeModifed","target","dyslexiaextensionContent"],"mappings":"AAAA,YAGA,IAAIA,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAEpCD,YAAYC,UAAUC,kBAAoB,gCAE1CF,YAAYC,UAAUE,WACpBC,aAAcJ,YAAYC,UAAUC,kBAAoB,SACxDG,aAAcL,YAAYC,UAAUC,kBAAoB,SACxDI,cAAeN,YAAYC,UAAUC,kBAAoB,UACzDK,gBAAiBP,YAAYC,UAAUC,kBAAoB,YAC3DM,IAAKR,YAAYC,UAAUC,kBAAoB,MAC/CO,KAAMT,YAAYC,UAAUC,kBAAoB,OAChDQ,UAAWV,YAAYC,UAAUC,kBAAoB,WACrDS,SAAUX,YAAYC,UAAUC,kBAAoB,UACpDU,OAAQZ,YAAYC,UAAUC,kBAAoB,SAClDW,oBAAqBb,YAAYC,UAAUC,kBAAoB,sBAC/DY,qBAAsBd,YAAYC,UAAUC,kBAAoB,uBAChEa,aAAcf,YAAYC,UAAUC,kBAAoB,eACxDc,WAAYhB,YAAYC,UAAUC,kBAAoB,aACtDe,UAAWjB,YAAYC,UAAUC,kBAAoB,YACrDgB,eAAgBlB,YAAYC,UAAUC,kBAAoB,OAC1DiB,IAAKnB,YAAYC,UAAUC,kBAAoB,MAC/CkB,cAAepB,YAAYC,UAAUC,kBAAoB,gBACzDmB,oBAAqBrB,YAAYC,UAAUC,kBAAoB,qBAC/DoB,SAAUtB,YAAYC,UAAUC,kBAAoB,WACpDqB,gBAAiBvB,YAAYC,UAAUC,kBAAoB,iBAC3DsB,QAASxB,YAAYC,UAAUC,kBAAoB,UAIrD,IAAIF,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAEpCD,YAAYC,UAAUwB,MACpBC,gBAAiB,kBACjBC,KAAM,OACNC,SAAU,WACVC,cAAe,gBAIjB,IAAI7B,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAGpCD,YAAYC,UAAU6B,eAAiB,gCAEvC9B,YAAYC,UAAU8B,IACpBC,iBAAkBhC,YAAYC,UAAU6B,eAAiB,SACzDG,iBAAkBjC,YAAYC,UAAU6B,eAAiB,SACzDI,kBAAmBlC,YAAYC,UAAU6B,eAAiB,UAC1DK,cAAenC,YAAYC,UAAU6B,eAAiB,iBACtDM,cAAepC,YAAYC,UAAU6B,eAAiB,iBAIxD,IAAI9B,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAGpCD,YAAYC,UAAUoC,aAAe,UAErCrC,YAAYC,UAAUqC,QACpBC,YAAavC,YAAYC,UAAUoC,aAAe,WAClDG,iBAAkBxC,YAAYC,UAAUoC,aAAe,uBACvDI,aAAczC,YAAYC,UAAUoC,aAAe,mBACnDK,gBAAiB1C,YAAYC,UAAUoC,aAAe,sBAMxD,IAAIrC,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAEpCD,YAAYC,UAAU0C,SACpBC,cAAe,eAMjB,IAAI5C,aAAcA,eAClBA,aAAYC,UAAYD,YAAYC,cAEpCD,YAAYC,UAAU4C,OACpBC,IAAK,iBAMP,IAAI9C,aAAcA,eAClBA,aAAY+C,SAAW/C,YAAY+C,aAGnC/C,YAAY+C,SAASC,iBAAmB,SAASC,EAAMC,EAAUC,GAC/DC,KAAKH,KAAOA,EACZG,KAAKF,SAAWA,EAChBE,KAAKD,UAAYA,IAAa,GAIhCnD,YAAY+C,SAASC,iBAAiBK,UAAUC,iBAAmB,WACjEF,KAAKH,KAAKK,iBAAiB,QAAS,SAASC,GACvCH,KAAKD,WACPI,EAAEC,gBAEJ,IAAIC,IAAQF,EAAEG,eAAiBH,GAAGI,cAAcC,QAAQ,cAAgB,EACxER,MAAKF,SAASO,IACdI,KAAKT,OAAO,GAKhB,IAAIpD,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAM7B9D,YAAY8D,GAAGC,UAAY,SAASC,GAelC,MAdAZ,MAAKa,aAAeC,SAASC,cAAc,OAC3Cf,KAAKgB,OAAS,GAAIpE,aAAY8D,GAAGO,OAAOjB,MACxCA,KAAKkB,QAAU,GAAItE,aAAY8D,GAAGS,QAAQnB,MAC1CA,KAAKoB,OAAS,GAAIxE,aAAY8D,GAAGW,OAAOrB,MAExCA,KAAKa,aAAaS,UAAY1E,YAAYC,UAAUE,UAAUI,gBAC9DyD,EAAKW,YAAYvB,KAAKa,cAEtBb,KAAKgB,OAAOQ,OACZxB,KAAKkB,QAAQM,OACbxB,KAAKoB,OAAOI,OAEZxB,KAAKgB,OAAOS,UAAU7E,YAAYC,UAAU4C,MAAMC,KAE3CM,MAGTpD,YAAY8D,GAAGC,UAAUV,UAAUyB,KAAO,WACxC1B,KAAKa,aAAac,MAAMC,QAAU,SAGpChF,YAAY8D,GAAGC,UAAUV,UAAU4B,KAAO,WACxC7B,KAAKa,aAAac,MAAMC,QAAU,QAGpChF,YAAY8D,GAAGC,UAAUV,UAAU6B,IAAM,WACvC,MAAO9B,MAAKa,cAGdjE,YAAY8D,GAAGC,UAAUV,UAAU8B,UAAY,WAC7C,MAAO/B,MAAKgB,QAGdpE,YAAY8D,GAAGC,UAAUV,UAAU+B,WAAa,WAC9C,MAAOhC,MAAKkB,SAGdtE,YAAY8D,GAAGC,UAAUV,UAAUgC,UAAY,WAC7C,MAAOjC,MAAKoB,OAOd,IAAIxE,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAGS,QAAU,SAASe,GAChClC,KAAKkC,OAASA,GAGhBtF,YAAY8D,GAAGS,QAAQlB,UAAUkC,MAAQ,WAEvC,MADAnC,MAAKkB,QAAQkB,UAAY,GAClBpC,KAAKkB,SAGdtE,YAAY8D,GAAGS,QAAQlB,UAAUoC,OAAS,WACxCrC,KAAKkB,QAAQoB,WAAWC,YAAYvC,KAAKkB,UAG3CtE,YAAY8D,GAAGS,QAAQlB,UAAU6B,IAAM,WACrC,MAAO9B,MAAKkB,SAGdtE,YAAY8D,GAAGS,QAAQlB,UAAUyB,KAAO,WACtC1B,KAAKkB,QAAQS,MAAMC,QAAU,SAG/BhF,YAAY8D,GAAGS,QAAQlB,UAAU4B,KAAO,WACtC7B,KAAKkB,QAAQS,MAAMC,QAAU,QAG/BhF,YAAY8D,GAAGS,QAAQlB,UAAUuB,KAAO,WACtCxB,KAAKkB,QAAUJ,SAASC,cAAc,OACtCf,KAAKkB,QAAQI,UAAY1E,YAAYC,UAAUE,UAAUG,cACzD8C,KAAKkC,OAAOJ,MAAMP,YAAYvB,KAAKkB,SAKrC,IAAItE,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAG8B,IAAM,SAASN,GAC5BlC,KAAKkC,OAASA,GAGhBtF,YAAY8D,GAAG8B,IAAIvC,UAAUkC,MAAQ,WAEnC,MADAnC,MAAKkB,QAAQkB,UAAY,GAClBpC,KAAKkB,SAGdtE,YAAY8D,GAAG8B,IAAIvC,UAAUoC,OAAS,WACpCrC,KAAKkB,QAAQoB,WAAWC,YAAYvC,KAAKkB,UAG3CtE,YAAY8D,GAAG8B,IAAIvC,UAAU6B,IAAM,WACjC,MAAO9B,MAAKkB,SAGdtE,YAAY8D,GAAG8B,IAAIvC,UAAUyB,KAAO,WAClC1B,KAAKkB,QAAQS,MAAMC,QAAU,SAG/BhF,YAAY8D,GAAG8B,IAAIvC,UAAU4B,KAAO,WAClC7B,KAAKkB,QAAQS,MAAMC,QAAU,QAG/BhF,YAAY8D,GAAG8B,IAAIvC,UAAUuB,KAAO,SAAS1B,GAC3CE,KAAKkB,QAAUJ,SAASC,cAAc,OACtCf,KAAKkB,QAAQkB,UAAY,IACzBpC,KAAKkB,QAAQI,UAAY1E,YAAYC,UAAUE,UAAUK,IACzD4C,KAAKkC,OAAOJ,MAAMP,YAAYvB,KAAKkB,SAChCpB,GACDE,KAAKkB,QAAQhB,iBAAiB,QAASJ,GAAU,GAMrD,IAAIlD,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAGW,OAAS,SAASa,GAC/BlC,KAAKkC,OAASA,GAGhBtF,YAAY8D,GAAGW,OAAOpB,UAAUkC,MAAQ,WAEtC,MADAnC,MAAKyC,YAAYL,UAAY,GACtBpC,KAAKyC,aAGd7F,YAAY8D,GAAGW,OAAOpB,UAAUoC,OAAS,WACvCrC,KAAKyC,YAAYH,WAAWC,YAAYvC,KAAKyC,cAG/C7F,YAAY8D,GAAGW,OAAOpB,UAAU6B,IAAM,WACpC,MAAO9B,MAAKyC,aAGd7F,YAAY8D,GAAGW,OAAOpB,UAAUyB,KAAO,WACrC1B,KAAKyC,YAAYd,MAAMC,QAAU,SAGnChF,YAAY8D,GAAGW,OAAOpB,UAAU4B,KAAO,WACrC7B,KAAKyC,YAAYd,MAAMC,QAAU,QAGnChF,YAAY8D,GAAGW,OAAOpB,UAAUuB,KAAO,WACrCxB,KAAKyC,YAAc3B,SAASC,cAAc,OAC1Cf,KAAKyC,YAAYnB,UAAY1E,YAAYC,UAAUE,UAAUE,aAC7D+C,KAAKyC,YAAYC,GAAK9F,YAAYC,UAAU8B,GAAGE,iBAC/CmB,KAAKkC,OAAOJ,MAAMP,YAAYvB,KAAKyC,aAKrC,IAAI7F,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAGO,OAAS,SAASiB,GAC/BlC,KAAKkC,OAASA,GAGhBtF,YAAY8D,GAAGO,OAAOhB,UAAUkC,MAAQ,WAGtC,MAFAnC,MAAK2C,YAAYP,UAAY,GAC7BpC,KAAK4C,aACE5C,KAAKgB,QAGdpE,YAAY8D,GAAGO,OAAOhB,UAAUoC,OAAS,WACvCrC,KAAKgB,OAAOsB,WAAWC,YAAYvC,KAAKgB,SAG1CpE,YAAY8D,GAAGO,OAAOhB,UAAUwB,UAAY,SAASP,GACnD,GAAGA,IAAYtE,YAAYC,UAAU4C,MAAMC,IAAK,CAC9CM,KAAK2C,YAAYP,UAAY,EAC7B,IAAIS,GAAU/B,SAASC,cAAc,MACrC8B,GAAQC,IAAMC,OAAOC,UAAUC,OAAOrG,YAAYC,UAAUqC,OAAOC,aACnEa,KAAK2C,YAAYpB,YAAYsB,OAE7B7C,MAAK2C,YAAYP,UAAYlB,CAE/B,OAAOlB,MAAKgB,QAGdpE,YAAY8D,GAAGO,OAAOhB,UAAU2C,WAAa,WAC3C5C,KAAKkD,UAAUd,UAAY,GAC3BpC,KAAKmD,WAAWf,UAAY,IAG9BxF,YAAY8D,GAAGO,OAAOhB,UAAUmD,WAAa,SAAStD,GACpDE,KAAKqD,YAAYzG,YAAYC,UAAUqC,OAAOoE,UAAWxD,IAG3DlD,YAAY8D,GAAGO,OAAOhB,UAAUoD,YAAc,SAASE,EAASC,EAAaC,GAC3E,GAAIC,GAAU5C,SAASC,cAAc,OACjC4C,EAAkB,EAMtB,OALGF,KAAYE,GAAmB,IAAMF,GACxCC,EAAQpC,UAAY1E,YAAYC,UAAUE,UAAUc,UAAY8F,EAChED,EAAQZ,IAAMC,OAAOC,UAAUC,OAAOM,GACtCG,EAAQxD,iBAAiB,QAASsD,GAClCxD,KAAKkD,UAAU3B,YAAYmC,GACpBA,GAGT9G,YAAY8D,GAAGO,OAAOhB,UAAU2D,eAAiB,SAAS9D,GACxD,MAAOE,MAAKqD,YAAYzG,YAAYC,UAAUqC,OAAOG,aAAcS,IAGrElD,YAAY8D,GAAGO,OAAOhB,UAAU4D,kBAAoB,WAClD7D,KAAK8D,aACHlH,YAAYC,UAAUqC,OAAOI,gBAC7B,WACEU,KAAK+D,SAAW,GAAInH,aAAY8D,GAAGsD,SAAShE,KAAKkC,OAAOJ,MACxD,IAAImC,GAAgBnD,SAASC,cAAc,MAC3CmD,SAAQC,IAAI,OACZD,QAAQC,IAAIvH,YAAYC,UAAU8B,GAClC,IAAIyF,GAAU,GAAIxH,aAAY8D,GAAG2D,MAC/BzH,YAAYC,UAAUwB,KAAKG,SAAU5B,YAAYC,UAAU8B,GAAG2F,eAChEL,GAAc1C,YAAY6C,EAAQtC,MAClC,IAAIyC,GAAQ,GAAI3H,aAAY8D,GAAG2D,MAC7BzH,YAAYC,UAAUwB,KAAKI,cAAe7B,YAAYC,UAAU8B,GAAG6F,eACrEP,GAAc1C,YAAYgD,EAAMzC,MAChC,IAAI2C,GAAe3D,SAASC,cAAc,SAC1C0D,GAAanD,UAAY1E,YAAYC,UAAUE,UAAUS,OACzDiH,EAAarC,UAAYxF,YAAYC,UAAUwB,KAAKE,KACpDkG,EAAavE,iBAAiB,QAAS,WACrC,GAAIwE,GAAc5D,SAAS6D,eAAe/H,YAAYC,UAAU8B,GAAG6F,gBAAgBI,KACnFV,SAAQC,IAAIO,EACZ,IAAIG,GAAiB/D,SAAS6D,eAAe/H,YAAYC,UAAU8B,GAAG2F,gBAAgBM,MAClFE,GACFP,MAASG,EACTK,SAAYF,EAEdX,SAAQC,IAAIW,GACZ/B,OAAOiC,QAAQC,aACbC,OAAQtI,YAAYC,UAAU0C,QAAQC,cACtCuF,SAAUD,GACT,SAASK,GACVjB,QAAQC,IAAIgB,GACZnF,KAAK+D,SAAS1B,UACd5B,KAAKT,QACPS,KAAKT,OAAO,GACdiE,EAAc1C,YAAYkD,GAC1BzE,KAAK+D,SAASvC,KACZyC,EACArH,YAAYC,UAAUwB,KAAKC,kBAC7BmC,KAAKT,QAIXpD,YAAY8D,GAAGO,OAAOhB,UAAU6D,aAAe,SAASP,EAASC,EAAaC,GAC5E,GAAIC,GAAU5C,SAASC,cAAc,OACjC4C,EAAkB,EAMtB,OALGF,KAAYE,GAAmB,IAAMF,GACxCC,EAAQpC,UAAY1E,YAAYC,UAAUE,UAAUa,WAAa+F,EACjED,EAAQZ,IAAMC,OAAOC,UAAUC,OAAOM,GACtCG,EAAQxD,iBAAiB,QAASsD,GAClCxD,KAAKmD,WAAW5B,YAAYmC,GACrBA,GAGT9G,YAAY8D,GAAGO,OAAOhB,UAAUuB,KAAO,WACrCxB,KAAKgB,OAASF,SAASC,cAAc,OACrCf,KAAKgB,OAAOM,UAAY1E,YAAYC,UAAUE,UAAUC,aACxDgD,KAAKgB,OAAO0B,GAAK9F,YAAYC,UAAU8B,GAAGC,iBAC1CoB,KAAKkC,OAAOJ,MAAMP,YAAYvB,KAAKgB,QAEnChB,KAAKkD,UAAYpC,SAASC,cAAc,OACxCf,KAAKkD,UAAU5B,UAAY1E,YAAYC,UAAUE,UAAUU,oBAC3DuC,KAAKkD,UAAUR,GAAK9F,YAAYC,UAAU8B,GAAGyG,kBAC7CpF,KAAKgB,OAAOO,YAAYvB,KAAKkD,WAE7BlD,KAAK2C,YAAc7B,SAASC,cAAc,OAC1Cf,KAAK2C,YAAYrB,UAAY1E,YAAYC,UAAUE,UAAUY,aAC7DqC,KAAK2C,YAAYD,GAAK9F,YAAYC,UAAU8B,GAAGhB,aAC/CqC,KAAKgB,OAAOO,YAAYvB,KAAK2C,aAE7B3C,KAAKmD,WAAarC,SAASC,cAAc,OACzCf,KAAKmD,WAAW7B,UAAY1E,YAAYC,UAAUE,UAAUW,qBAC5DsC,KAAKmD,WAAWT,GAAK9F,YAAYC,UAAU8B,GAAG0G,mBAC9CrF,KAAKgB,OAAOO,YAAYvB,KAAKmD,aAG/BvG,YAAY8D,GAAGO,OAAOhB,UAAU6B,IAAM,WACpC,MAAO9B,MAAKgB,OAMd,IAAIpE,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAG2D,MAAQ,SAASiB,EAAa5C,GAK3C,MAJA1C,MAAKsF,YAAcA,EACnBtF,KAAKuF,UAAYzE,SAASC,cAAc,OACxCf,KAAK0C,GAAKA,EACV1C,KAAKwB,OACExB,MAGTpD,YAAY8D,GAAG2D,MAAMtH,WACnByI,UAAW,4BACXC,MAAO,wBACPC,MAAO,wBACPC,QAAS,qCAIX/I,YAAY8D,GAAG2D,MAAMpE,UAAUuB,KAAO,WACpCxB,KAAKuF,UAAUjE,UAAY1E,YAAY8D,GAAG2D,MAAMtH,UAAUyI,UAC1DxF,KAAKuF,UAAUnD,UAAY,GAE3BpC,KAAK4F,MAAQ9E,SAASC,cAAc,SACpCf,KAAK4F,MAAMtE,UAAY1E,YAAY8D,GAAG2D,MAAMtH,UAAU0I,MACtDzF,KAAK4F,MAAMxD,UAAYpC,KAAKsF,YAC5BtF,KAAKuF,UAAUhE,YAAYvB,KAAK4F,OAEhC5F,KAAK6F,MAAQ/E,SAASC,cAAc,SACpCf,KAAK6F,MAAMvE,UAAY1E,YAAY8D,GAAG2D,MAAMtH,UAAU2I,MAEtDxB,QAAQC,IAAI,SACZD,QAAQC,IAAInE,KAAK0C,IAGd1C,KAAK0C,KACNwB,QAAQC,IAAI,QACZnE,KAAK6F,MAAMnD,GAAK1C,KAAK0C,IAGvB1C,KAAKuF,UAAUhE,YAAYvB,KAAK6F,QAIlCjJ,YAAY8D,GAAG2D,MAAMpE,UAAU6B,IAAM,WACnC,MAAO9B,MAAKuF,WAId3I,YAAY8D,GAAG2D,MAAMpE,UAAU6F,SAAW,WACxC,MAAO9F,MAAK6F,MAMd,IAAIjJ,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAGsD,SAAW,SAASuB,EAAWQ,EAAeC,GAI3D,MAHAhG,MAAKuF,UAAYA,EACjBvF,KAAK+F,cAAgBA,EACrB/F,KAAKgG,YAAcA,IAAe,EAC3BhG,MAGTpD,YAAY8D,GAAGsD,SAAS/D,UAAU6B,IAAM,WACtC,MAAO9B,MAAKiG,UAGdrJ,YAAY8D,GAAGsD,SAAS/D,UAAUyB,KAAO,WACvC1B,KAAKyC,YAAYd,MAAMC,QAAU,SAGnChF,YAAY8D,GAAGsD,SAAS/D,UAAUoC,OAAS,WACzCrC,KAAKuF,UAAUhD,YAAYvC,KAAKkG,SAChClG,KAAKuF,UAAUhD,YAAYvC,KAAKiG,UAC7BjG,KAAK+F,eACN/F,KAAK+F,iBAITnJ,YAAY8D,GAAGsD,SAAS/D,UAAUuB,KAAO,SAASN,EAASiF,GACzDnG,KAAKiG,SAAWnF,SAASC,cAAc,OACvCf,KAAKiG,SAAS3E,UAAY1E,YAAYC,UAAUE,UAAUO,UAC1D0C,KAAKuF,UAAUhE,YAAYvB,KAAKiG,UAChC/B,QAAQC,IAAIgC,GACTA,GAA6B,KAAfA,IACfnG,KAAKgB,OAASF,SAASC,cAAc,MACrCf,KAAKmG,WAAarF,SAASC,cAAc,OACzCf,KAAKmG,WAAW/D,UAAY+D,EAC5BnG,KAAKgB,OAAOO,YAAYvB,KAAKmG,YAC7BnG,KAAKiG,SAAS1E,YAAYvB,KAAKgB,SAG9BE,GACDlB,KAAKiG,SAAS1E,YAAYL,GAE5BlB,KAAKkG,QAAUpF,SAASC,cAAc,OACtCf,KAAKkG,QAAQ5E,UAAY1E,YAAYC,UAAUE,UAAUQ,SAEtDyC,KAAKgG,aACNhG,KAAKkG,QAAQhG,iBAAiB,QAAS,WACrCF,KAAKqC,UACL5B,KAAKT,OAAO,GAGhBA,KAAKuF,UAAUhE,YAAYvB,KAAKkG,SAKlC,IAAItJ,aAAcA,eAClBA,aAAY8D,GAAK9D,YAAY8D,OAE7B9D,YAAY8D,GAAG0F,KAAO,SAASC,EAAcC,GAC3CtG,KAAKqG,aAAeA,EACpBrG,KAAKsG,WAAaA,EAClBtG,KAAKuG,cAAgBzF,SAASC,cAAc,MAC5Cf,KAAKuG,cAAcjF,UAAY1E,YAAYC,UAAUE,UAAUe,cAE/D,KAAI,GAAI0I,GAAI,EAAGA,EAAIxG,KAAKsG,WAAWG,OAAQD,IACzCxG,KAAK0G,gBAAgBF,EAEvBxG,MAAK2G,UAAY7F,SAASC,cAAc,OACxCf,KAAK2G,UAAUrF,UAAY1E,YAAYC,UAAUE,UAAUiB,cAC3DgC,KAAK2G,UAAUhF,MAAMiF,MAAQ,IAAM5G,KAAKsG,WAAWG,OAAS,IAC5DzG,KAAK2G,UAAUhF,MAAMkF,KAAO,MAC5B7G,KAAKuG,cAAchF,YAAYvB,KAAK2G,WACpC3G,KAAKqG,aAAa9E,YAAYvB,KAAKuG,eAEnCvG,KAAK8G,iBAAmBhG,SAASC,cAAc,OAC/Cf,KAAK8G,iBAAiBxF,UAAY1E,YAAYC,UAAUE,UAAUkB,oBAClE+B,KAAK8G,iBAAiBnF,MAAMiF,MAAQ,OAEpC5G,KAAK+G,sBAAwBjG,SAASC,cAAc,OACpDf,KAAK+G,sBAAsBzF,UAAY1E,YAAYC,UAAUE,UAAUoB,gBACvE6B,KAAK+G,sBAAsBpF,MAAMiF,MAAQ,IAAMN,EAAWG,OAAS,IAEnEzG,KAAK8G,iBAAiBvF,YAAYvB,KAAK+G,sBAEvC,KAAI,GAAIC,GAAI,EAAGA,EAAIV,EAAWG,OAAQO,IAAK,CACzC,GAAIC,GAAYX,EAAWU,GACvBE,EAAepG,SAASC,cAAc,MAC1CuF,GAAWU,GAAGnG,aAAeqG,EAC7BA,EAAa5F,UAAY1E,YAAYC,UAAUE,UAAUmB,SACzDgJ,EAAa3F,YAAY0F,EAAUE,KACnCD,EAAavF,MAAMiF,MAAQ,IAAMN,EAAWG,OAAS,IAErDS,EAAavF,MAAMkF,KAAO,KAC1B7G,KAAK+G,sBAAsBxF,YAAY2F,GAEzClH,KAAKqG,aAAa9E,YAAYvB,KAAK8G,mBAIrClK,YAAY8D,GAAG0F,KAAKnG,UAAUyG,gBAAkB,SAASF,GACrD,GAAIY,GAAMpH,KAAKsG,WAAWE,GACtBa,EAASvG,SAASC,cAAc,KACpCf,MAAKsG,WAAWgB,OAASD,EACzBA,EAAO/F,UAAY1E,YAAYC,UAAUE,UAAUgB,IACnDsJ,EAAOjF,UAAYgF,EAAIG,KACvBF,EAAO1F,MAAMiF,MAAQ,IAAM5G,KAAKsG,WAAWG,OAAS,IACpDzG,KAAKuG,cAAchF,YAAY8F,GAC/BA,EAAOnH,iBAAiB,QAAS,WAE/B,GAAIsH,GAAIhB,GAAK,IAAMxG,KAAKsG,WAAWG,OAEnCzG,MAAK2G,UAAUhF,MAAMkF,KAAOW,EAAI,GAEhC,IAAIC,GAAIjB,GAAK,IAAMxG,KAAKsG,WAAWG,OACnCzG,MAAK+G,sBAAsBpF,MAAM+F,UAAY,gBAAkBD,EAAI,gBACnEhH,KAAKT,OAIX,IAAI2H,mBAAoBA,qBACxBA,mBAAkB9K,UAAY8K,kBAAkB9K,cAEhD8K,kBAAkB9K,UAAU0C,SAC1BqI,aAAc,aACdC,cAAe,cACfC,SAAU,UACVtI,cAAe,eACfuI,mBAAoB,mBACpBC,oBAAqB,oBACrBC,eAAgB,gBAChBC,SAAU,UAIZ,IAAIP,mBAAoBA,qBACxBA,mBAAkBQ,UAAYR,kBAAkBQ,cAGhDR,kBAAkBQ,UAAUrL,kBAAoB,iBAEhD6K,kBAAkBQ,UAAUpL,WAC1BqL,QAAS,UACTC,SAAUV,kBAAkBQ,UAAUrL,kBAAoB,WAI5D,IAAI6K,mBAAoBA,qBACxBA,mBAAkBQ,UAAYR,kBAAkBQ,cAEhDR,kBAAkBQ,UAAU9J,MAC1BiK,WAAY,aACZC,MAAO,QACPC,cAAe,kPAMjB,IAAIb,mBAAoBA,qBACxBA,mBAAkBQ,UAAYR,kBAAkBQ,cAEhDR,kBAAkBQ,UAAUM,UAAY,iBAExCd,kBAAkB9K,UAAU6L,KAC1BC,QAAShB,kBAAkBQ,UAAUrL,kBAAoB,SACzD8L,SAAUjB,kBAAkBQ,UAAUrL,kBAAoB,WAI5D,IAAI6K,mBAAoBA,qBACxBA,mBAAkBQ,UAAYR,kBAAkBQ,cAGhDR,kBAAkBQ,UAAUU,gBAAkB,UAE9ClB,kBAAkBQ,UAAUjJ,QAC1BC,YAAawI,kBAAkBQ,UAAUU,gBAAkB,WAI7D,IAAIlB,mBAAoBA,qBACxBA,mBAAkBmB,YAAcnB,kBAAkBmB,gBAElDnB,kBAAkBmB,YAAYC,SAAW,SAAS7G,GAChDlC,KAAKuF,UAAYrD,EAAOqD,UACxBvF,KAAKkC,OAASA,EACdlC,KAAKkB,QAAUlB,KAAKuF,UAAUvD,aAC9BhC,KAAKgJ,eAAiB9G,EAAO8G,eAC7BhJ,KAAKiJ,cAAgB,MAGvBtB,kBAAkBmB,YAAYC,SAAS1K,MACrC6K,KAAM,MACNC,QAAS,UACTC,QAAS,uLAETC,gBAAiB,yGACjBC,MAAO,QACPC,WAAY,sKAEZC,QAAS,UACTC,aAAc,sDACdC,YAAa,cACbC,iBAAkB,2BAGpBhC,kBAAkBmB,YAAYC,SAASa,OACrCC,UAAW,YACXC,WAAY,aACZC,sBAAuB,gBACvBC,qBAAsB,gBAGxBrC,kBAAkBmB,YAAYC,SAASO,QAEnCW,KAAM,wCACN1C,KAAM,uBAGN0C,KAAM,2CACN1C,KAAM,kBAGN0C,KAAM,4BACN1C,KAAM,WAGN0C,KAAM,uCACN1C,KAAM,sBAGN0C,KAAM,6CACN1C,KAAM,8BAGN0C,KAAM,yCACN1C,KAAM,yBAGN0C,KAAM,0CACN1C,KAAM,iBAGN0C,KAAM,2CACN1C,KAAM,2BAGN0C,KAAM,iDACN1C,KAAM,8BAGN0C,KAAM,6CACN1C,KAAM,yBAGN0C,KAAM,8CACN1C,KAAM,sBAGN0C,KAAM,8CACN1C,KAAM,sBAIVI,kBAAkBmB,YAAYC,SAASmB,gBAEnCC,IAAK,UACL5C,KAAM,WAGN4C,IAAK,UACL5C,KAAM,UAGN4C,IAAK,UACL5C,KAAM,SAGN4C,IAAK,UACL5C,KAAM,SAKVI,kBAAkBmB,YAAYC,SAASqB,gBAEnCH,KAAM,kCACN1C,KAAM,kBAIVI,kBAAkBmB,YAAYC,SAASsB,MACrCC,OAAQ,sDAGV3C,kBAAkBmB,YAAYC,SAAS9I,UAAUuB,KAAO,WAEtDxB,KAAKuF,UAAUrE,QAAQiB,QAEvBnC,KAAKuK,SAAWzJ,SAASC,cAAc,OACvCf,KAAKuK,SAASjJ,UAAY1E,YAAYC,UAAUE,UAAUqB,QAE1D4B,KAAKwK,YAAc1J,SAASC,cAAc,OAC1Cf,KAAKwK,YAAYlJ,UAAY1E,YAAYC,UAAUE,UAAUqB,OAE7D,IAAIqM,KACFlD,KAAMI,kBAAkBmB,YAAYC,SAAS1K,KAAK6K,KAClD/B,IAAKnH,KAAKuK,SACVG,QAAQ,IAERnD,KAAMI,kBAAkBmB,YAAYC,SAAS1K,KAAK8K,QAClDhC,IAAKnH,KAAKwK,YACVE,QAAQ,GAGA,IAAI9N,aAAY8D,GAAG0F,KAAKpG,KAAKkB,QAAQY,MAAO2I,EAItDzK,MAAK2K,gBACL3K,KAAK4K,oBAQPjD,kBAAkBmB,YAAYC,SAAS9I,UAAU0K,cAAgB,WAC/D,GAAIE,GAAc/J,SAASC,cAAc,IACzC8J,GAAYzI,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAK+K,QACpEpJ,KAAKuK,SAAShJ,YAAYsJ,EAE1B,IAAIC,GAAchK,SAASC,cAAc,KACzC+J,GAAY1I,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKsL,iBACpE3J,KAAKuK,SAAShJ,YAAYuJ,EAG1B,KAAI,GADAC,GAAiBjK,SAASC,cAAc,SACpCiG,EAAI,EAAGA,EAAIW,kBAAkBmB,YAAYC,SAASmB,cAAczD,OAAQO,IAC9EhH,KAAKgL,aAAaD,EAAgBpD,kBAAkBmB,YAAYC,SAASmB,cAAclD,GAEzFhH,MAAKuK,SAAShJ,YAAYwJ,EAE1B,IAAIE,GAAanK,SAASC,cAAc,KACxCkK,GAAW7I,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKiL,MACnEtJ,KAAKuK,SAAShJ,YAAY0J,EAE1B,IAAIC,GAAWpK,SAASC,cAAc,IACtCmK,GAAS9I,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKkL,WACjEvJ,KAAKuK,SAAShJ,YAAY2J,EAG1B,KAAI,GADAC,GAAgBrK,SAASC,cAAc,SACnCyF,EAAI,EAAGA,EAAImB,kBAAkBmB,YAAYC,SAASO,MAAM7C,OAAQD,IACtExG,KAAKoL,YAAYD,EAAexD,kBAAkBmB,YAAYC,SAASO,MAAM9C,GAE/ExG,MAAKuK,SAAShJ,YAAY4J,IAG5BxD,kBAAkBmB,YAAYC,SAAS9I,UAAU+K,aAAe,SAASK,EAAaC,GACpF,GAAIC,GAASzK,SAASC,cAAc,KACpCsK,GAAY9J,YAAYgK,EAExB,IAAIC,GAAa1K,SAASC,cAAc,KACxCyK,GAAWpJ,UAAYkJ,EAAe/D,KACtCgE,EAAOhK,YAAYiK,EAEnB,IAAIC,GAAkB3K,SAASC,cAAc,KAC7CwK,GAAOhK,YAAYkK,EAEnB,IAAIC,GAAY5K,SAASC,cAAc,SACvC2K,GAAUtJ,UAAY,IACtBqJ,EAAgBlK,YAAYmK,GAE5BA,EAAUxL,iBAAiB,QAAS,WAClCgE,QAAQC,IAAInE,KAAKkC,QACjBlC,KAAKkC,OAAOyJ,cAAcL,EAAenB,KACzCnK,KAAKkC,OAAO0J,kBACZnL,KAAKT,OAAO,EAEd,IAAI6L,GAAiB/K,SAASC,cAAc,KAC5CwK,GAAOhK,YAAYsK,EAEnB,IAAIC,GAAWhL,SAASC,cAAc,SACtC+K,GAAS1J,UAAY,KACrB0J,EAASxK,UAAYqG,kBAAkBmB,YAAYC,SAASa,MAAMC,UAClEgC,EAAetK,YAAYuK,GAExB9L,KAAKkC,OAAO6J,kBAAoBT,EAAenB,MAChD2B,EAASnK,MAAMC,QAAU,OAG3B,IAAIoK,GAAkBlL,SAASC,cAAc,KAC7CwK,GAAOhK,YAAYyK,EAEnB,IAAIC,GAAYnL,SAASC,cAAc,SACvCkL,GAAU7J,UAAY,MAEnBpC,KAAKkC,OAAO6J,kBAAoBT,EAAenB,MAChD8B,EAAUtK,MAAMC,QAAU,QAG5BqK,EAAU3K,UAAYqG,kBAAkBmB,YAAYC,SAASa,MAAMG,sBACnEiC,EAAgBzK,YAAY0K,GAC5BH,EAAS5L,iBAAiB,QAAS,WAEjCF,KAAKkC,OAAOyJ,cAAcL,EAAenB,KACzCnK,KAAKkC,OAAO0J,iBAGV7I,OAAOiC,QAAQC,aACXC,OAAQyC,kBAAkB9K,UAAU0C,QAAQwI,mBAC5CmE,MAAOZ,GACN,WACDpH,QAAQC,IAAI,cAMlB,KAAI,GAFAgI,GAAYrL,SAASsL,uBACvBzE,kBAAkBmB,YAAYC,SAASa,MAAMI,sBACvCxD,EAAI,EAAGA,EAAI2F,EAAU1F,OAAQD,IACnC2F,EAAU3F,GAAG7E,MAAMC,QAAU,OAK/B,KAAI,GAFAyK,GAAavL,SAASsL,uBACxBzE,kBAAkBmB,YAAYC,SAASa,MAAMG,uBACvC/C,EAAI,EAAGA,EAAIqF,EAAW5F,OAAQO,IACpCqF,EAAWrF,GAAGrF,MAAMC,QAAU,MAIhCkK,GAASnK,MAAMC,QAAU,OACzBqK,EAAUtK,MAAMC,QAAU,SAC1BnB,KAAKT,OAEPiM,EAAU/L,iBAAiB,QAAS,WAClCF,KAAKkC,OAAOoK,mBAEZvJ,OAAOiC,QAAQC,aACTC,OAAQyC,kBAAkB9K,UAAU0C,QAAQyI,qBAC3C,WACD9D,QAAQC,IAAI,kBAGlB2H,EAASnK,MAAMC,QAAU,QACzBqK,EAAUtK,MAAMC,QAAU,QAC1BnB,KAAKT,QAIT2H,kBAAkBmB,YAAYC,SAAS9I,UAAUmL,YAAc,SAASD,EAAeoB,GACrF,GAAIhB,GAASzK,SAASC,cAAc,KACpCoK,GAAc5J,YAAYgK,EAE1B,IAAIC,GAAa1K,SAASC,cAAc,KACxCyK,GAAWpJ,UAAYmK,EAAShF,KAChCgE,EAAOhK,YAAYiK,EAEnB,IAAIC,GAAkB3K,SAASC,cAAc,KAC7CwK,GAAOhK,YAAYkK,EAEnB,IAAIC,GAAY5K,SAASC,cAAc,SACvC2K,GAAUtJ,UAAY,IACtBqJ,EAAgBlK,YAAYmK,GAE5BA,EAAUxL,iBAAiB,QAAS,WAClCgE,QAAQC,IAAInE,KAAKkC,QACjBlC,KAAKkC,OAAOsK,QAAQD,EAAStC,MAC7BjK,KAAKkC,OAAO0J,kBACZnL,KAAKT,OAAO,EAEd,IAAI6L,GAAiB/K,SAASC,cAAc,KAC5CwK,GAAOhK,YAAYsK,EAEnB,IAAIC,GAAWhL,SAASC,cAAc,SACtC+K,GAAS1J,UAAY,KACrB0J,EAASxK,UAAYqG,kBAAkBmB,YAAYC,SAASa,MAAMC,UAClEgC,EAAetK,YAAYuK,GAExB9L,KAAKkC,OAAOuK,YAAcF,EAAStC,OACpC6B,EAASnK,MAAMC,QAAU,OAG3B,IAAIoK,GAAkBlL,SAASC,cAAc,KAC7CwK,GAAOhK,YAAYyK,EAEnB,IAAIC,GAAYnL,SAASC,cAAc,SACvCkL,GAAU7J,UAAY,MAEnBpC,KAAKkC,OAAOuK,YAAcF,EAAStC,OACpCgC,EAAUtK,MAAMC,QAAU,QAG5BqK,EAAU3K,UAAYqG,kBAAkBmB,YAAYC,SAASa,MAAME,WACnEkC,EAAgBzK,YAAY0K,GAC5BH,EAAS5L,iBAAiB,QAAS,WAEjCF,KAAKkC,OAAOsK,QAAQD,EAAStC,MAC7BjK,KAAKkC,OAAO0J,iBAGV7I,OAAOiC,QAAQC,aACXC,OAAQyC,kBAAkB9K,UAAU0C,QAAQqI,aAC5CqC,KAAMsC,GACL,WACDrI,QAAQC,IAAI,aAMlB,KAAI,GAFAgI,GAAYrL,SAASsL,uBACvBzE,kBAAkBmB,YAAYC,SAASa,MAAMC,WACvCrD,EAAI,EAAGA,EAAI2F,EAAU1F,OAAQD,IACnC2F,EAAU3F,GAAG7E,MAAMC,QAAU,OAK/B,KAAI,GAFAyK,GAAavL,SAASsL,uBACxBzE,kBAAkBmB,YAAYC,SAASa,MAAME,YACvC9C,EAAI,EAAGA,EAAIqF,EAAW5F,OAAQO,IACpCqF,EAAWrF,GAAGrF,MAAMC,QAAU,MAKhCkK,GAASnK,MAAMC,QAAU,OACzBqK,EAAUtK,MAAMC,QAAU,SAC1BnB,KAAKT,OAEPiM,EAAU/L,iBAAiB,QAAS,WAClCF,KAAKkC,OAAOwK,aAEZ3J,OAAOiC,QAAQC,aACTC,OAAQyC,kBAAkB9K,UAAU0C,QAAQsI,eAC3C,WACD3D,QAAQC,IAAI,kBAGlB2H,EAASnK,MAAMC,QAAU,QACzBqK,EAAUtK,MAAMC,QAAU,QAC1BnB,KAAKT,QAGT2H,kBAAkBmB,YAAYC,SAAS9I,UAAU2K,iBAAmB,WAClE,GAAIC,GAAc/J,SAASC,cAAc,IACzC8J,GAAYzI,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKgL,gBACpErJ,KAAKwK,YAAYjJ,YAAYsJ,EAE7B,IAAII,GAAanK,SAASC,cAAc,KACxCkK,GAAW7I,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKiL,MACnEtJ,KAAKwK,YAAYjJ,YAAY0J,EAE7B,IAAIC,GAAWpK,SAASC,cAAc,IACtCmK,GAAS9I,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKkL,WACjEvJ,KAAKwK,YAAYjJ,YAAY2J,EAG7B,KAAI,GADAC,GAAgBrK,SAASC,cAAc,SACnCyF,EAAI,EAAGA,EAAImB,kBAAkBmB,YAAYC,SAASqB,cAAc3D,OAAQD,IAC9ExG,KAAKoL,YAAYD,EAAexD,kBAAkBmB,YAAYC,SAASqB,cAAc5D,GAEvFxG,MAAKwK,YAAYjJ,YAAY4J,EAE7B,IAAIwB,GAAe7L,SAASC,cAAc,KAC1C4L,GAAavK,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKmL,QACrExJ,KAAKwK,YAAYjJ,YAAYoL,EAE7B,IAAIC,GAAa9L,SAASC,cAAc,IACxC6L,GAAWxK,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKoL,aACnEzJ,KAAKwK,YAAYjJ,YAAYqL,EAE7B,IAAIC,GAA2B/L,SAASC,cAAc,SACtD8L,GAAyBzK,UAAYuF,kBAAkBmB,YAAYC,SAAS1K,KAAKqL,YACjFmD,EAAyB3M,iBAAiB,QAAS,WAEjD,GAAI4M,GAAahM,SAASC,cAAc,SACxC+L,GAAWC,YAAc,YACzBD,EAAWhK,IAAMC,OAAOC,UAAUC,OAAO,4CAEzC,IAAI+J,GAASlM,SAASmM,qBAAqB,QAAQ,EAEnDH,GAAWI,OAAS,WAEhB,GAAIC,GAAarM,SAASC,cAAc,SACxCoM,GAAWrK,IAAMC,OAAOC,UAAUC,OAAO,+CACzC+J,EAAOzL,YAAY4L,IAGvBH,EAAOzL,YAAYuL,KAElB,GACH9M,KAAKwK,YAAYjJ,YAAYsL,GAO/B,IAAIlF,mBAAoBA,qBACxBA,mBAAkByF,QAAUzF,kBAAkByF,YAE9CzF,kBAAkByF,QAAQC,IAAM,WAC5BrN,KAAKsN,OAAS,KACdtN,KAAKuN,MAAQ,KACbvN,KAAKwN,kBAAmB,EACxBxN,KAAKyN,SAAW,KAChBzN,KAAK0N,YAAc,KACnB1N,KAAK2N,cAAgB,KACrB3N,KAAK4N,UAAY,KACjB5N,KAAK6N,cAAgB,KACrB7N,KAAK8N,SAAW,KAChB9N,KAAK+N,aAAc,GAGvB7J,QAAQC,IAAI,gCAEZwD,kBAAkByF,QAAQC,IAAIW,qBAAuB,WACrDrG,kBAAkByF,QAAQC,IAAIY,YAAc,GAC5CtG,kBAAkByF,QAAQC,IAAIa,aAAe,uBAC7CvG,kBAAkByF,QAAQC,IAAIc,kBAAoB,KAGlDxG,kBAAkByF,QAAQC,IAAI7L,KAAO,WACnC4M,OAAOC,gBAAgBC,gBAAkB,WACnCtO,KAAKsN,SAGTpJ,QAAQC,IAAI,8BACZnE,KAAKsN,OAASc,OAAOC,gBAAgBE,YACrCrK,QAAQC,IAAI,6BACZnE,KAAKwO,iBACL/N,KAAKT,OAKT2H,kBAAkByF,QAAQC,IAAImB,aAAe,WAC3CtK,QAAQC,IAAI,iCACZnE,KAAKyO,WACLzO,KAAK0O,eACL1O,KAAK2O,mBAIPhH,kBAAkByF,QAAQC,IAAIoB,SAAW,WACvC,IAAIzO,KAAKuN,MAAT,CAMA,GAFArJ,QAAQC,IAAI,8BAEPnE,KAAKsN,QAAiC,IAAvBtN,KAAKsN,OAAO7G,OAE9B,WADAvC,SAAQC,IAAI,yCAMd,KAAK,GADDyK,GAAkB,KACbpI,EAAI,EAAGA,EAAIxG,KAAKsN,OAAO7G,OAAQD,IAAK,CAC3C,GAAIxG,KAAKsN,OAAO9G,GAAGe,OAASI,kBAAkByF,QAAQC,IAAIW,sBAAwBhO,KAAKsN,OAAO9G,GAAGqI,aAAc,CAC7G7O,KAAKuN,MAAQvN,KAAKsN,OAAO9G,GACzBtC,QAAQC,IAAI,qCAAuCwD,kBAAkByF,QAAQC,IAAIW,qBAAuB,IACxG,QAEGY,GAAmB5O,KAAKsN,OAAO9G,GAAGqI,eACrCD,EAAkB5O,KAAKsN,OAAO9G,IAK7BxG,KAAKuN,QACHqB,GAKH5O,KAAKuN,MAAQvN,KAAK4O,gBAClB1K,QAAQC,IAAI,+BAAiCwD,kBAAkByF,QAAQC,IAAIW,qBAAuB,uBAAyBhO,KAAKuN,MAAMhG,KAAO,OAL7IvH,KAAKsN,OAAStN,KAAKsN,OAAO9G,GAC1BxG,KAAKwN,kBAAmB,EACxBtJ,QAAQC,IAAI,8EASlBwD,kBAAkByF,QAAQC,IAAIqB,aAAe,WAC3C1O,KAAK8N,SAAWhN,SAASC,cAAc,OACvCf,KAAK8N,SAASpL,GAAK,oBACnB5B,SAASF,KAAKW,YAAYvB,KAAK8N,WAGjCnG,kBAAkByF,QAAQC,IAAIsB,gBAAkB,WAC9CzK,QAAQC,IAAI,mCAEZnE,KAAK8N,SAAS5N,iBAAiB,QAAS,WACtCF,KAAK8O,OAAO9O,KAAKyN,UACjBzN,KAAKyN,SAAW,KAChBzN,KAAK+O,cACLtO,KAAKT,OACPc,SAASF,KAAKV,iBAAiB,YAAaF,KAAKgP,iBACjDZ,OAAOlO,iBAAiB,SAAU,WAC5BF,KAAK+N,aACP/N,KAAKiP,kBAEPxO,KAAKT,QAIT2H,kBAAkByF,QAAQC,IAAI2B,gBAAkB,SAAS7O,GAEvD,GAAI+O,GAAepO,SAASqO,iBAAiBhP,EAAEiP,QAASjP,EAAEkP,QAC1D,IAAIH,IAAiBlP,KAAK6N,cAA1B,CAGE7N,KAAK6N,cAAgBqB,CACrB,IAAII,GAAwBtP,KAAK6N,aACjCO,QAAOmB,WAAW,WAChB,GAAIvP,KAAK6N,gBAAkByB,GACzBtP,KAAK6N,gBAAkB7N,KAAK8N,SAG5B,WADA9N,MAAK+O,YAGL,IAAIS,GAAWxP,KAAKyP,YAAYH,EAC5BE,IACFxP,KAAK0P,eAAeF,IAGxB/O,KAAKT,MAAO2H,kBAAkByF,QAAQC,IAAIc,qBAKhDxG,kBAAkByF,QAAQC,IAAI0B,WAAa,WACzC/O,KAAK8N,SAASnM,MAAMgO,QAAU,EAC9B3P,KAAK8N,SAASnM,MAAMiO,cAAgB,OACpC5P,KAAK+N,aAAc,GAIrBpG,kBAAkByF,QAAQC,IAAI4B,eAAiB,WAC7CjP,KAAK8N,SAASnM,MAAMC,QAAU,OAC9B5B,KAAK8N,SAASnM,MAAMgO,QAAU,EAC9B3P,KAAK8N,SAASnM,MAAMiO,cAAgB,OACpCxB,OAAOmB,WAAW,WAChBvP,KAAK8N,SAASnM,MAAMC,QAAU,GAC9B5B,KAAK+N,aAAc,GACnBtN,KAAKT,MAAO,IAIhB2H,kBAAkByF,QAAQC,IAAIqC,eAAiB,SAASG,GACtD,GAAIC,GAAOD,EAAGvN,WAAWyN,uBACzBjC,UAASnM,MAAMkF,KAAOiJ,EAAKjJ,KAAO,KAClCiH,SAASnM,MAAMqO,IAAMF,EAAKE,IAAOF,EAAKG,OAAS,EAAK,KACpDnC,SAASnM,MAAMgO,QAAU,EACzB7B,SAASnM,MAAMiO,cAAgB,OAE/B5P,KAAKyN,SAAWoC,EAEhB7P,KAAK+N,aAAc,EAIrB,IAAI0B,aAAc,SAASI,GACzB,GAAIA,EAAGK,WAAaC,KAAKC,UACvB,MAAOP,EAIT,KAAK,GAAIrJ,GAAI,EAAGA,EAAIqJ,EAAGQ,WAAW5J,OAAQD,IACxC,GAAIqJ,EAAGQ,WAAW7J,GAAG0J,WAAaC,KAAKC,UACrC,MAAOP,GAAGQ,WAAW7J,GAM3BmB,mBAAkByF,QAAQC,IAAIyB,OAAS,SAASe,GAE9C,GAAI7P,KAAK4N,UAMP,MALA5N,MAAK4N,UAAU0C,MAAQ,WACrBtQ,KAAKuQ,UACLvQ,KAAK8O,OAAOe,IACZpP,KAAKT,UACPoO,QAAOC,gBAAgBmC,QAIzB,KAAKX,EAEH,WADA7P,MAAK+O,YAIP,IAAIS,GAAWxP,KAAKyP,YAAYI,EAEhC,KAAK7P,KAAKwP,SAER,WADAtL,SAAQC,IAAI,oFAId,IAAI9D,GAAOmP,EAASiB,YAAYC,MAChC,OAAKrQ,IAAwB,IAAhBA,EAAKoG,QAIlBzG,KAAK2N,cAAgB6B,EAASiB,YAC9BzQ,KAAK0N,YAAc8B,EAEnBxP,KAAK4N,UAAY,GAAI+C,0BAAyB3Q,KAAK2N,eACnD3N,KAAK4N,UAAUL,MAAQvN,KAAKuN,MAC5BvN,KAAK4N,UAAUgD,KAAOjJ,kBAAkByF,QAAQC,IAAIY,YACpDjO,KAAK4N,UAAUiD,WAAa,SAAS1Q,GACnCH,KAAK8Q,oBAAoB3Q,EAAE4Q,YAC3BtQ,KAAKT,MACPA,KAAK4N,UAAU0C,MAAQ,SAASnQ,GAC9BH,KAAKuQ,WACL9P,KAAKT,MACPA,KAAK4N,UAAUoD,QAAU,SAAS7Q,GAChC+D,QAAQC,IAAI,oCACZnE,KAAKuQ,WACL9P,KAAKT,UAEPoO,QAAOC,gBAAgB4C,MAAMjR,KAAK4N,gBApBhC1J,SAAQC,IAAI,yEA2BhBwD,kBAAkByF,QAAQC,IAAIkD,QAAU,WACtCvQ,KAAKkR,mBACLlR,KAAK0N,YAAc,KACnB1N,KAAK2N,cAAgB,KACrB3N,KAAK4N,UAAY,KACjB5N,KAAKyN,SAAW,MAIlB9F,kBAAkByF,QAAQC,IAAI6D,iBAAmB,WAC/C,GAAK1D,iBAAL,CAMA,GAAI2D,GAAgBrQ,SAASsQ,cAAc,IAAMlD,aAEjD,IAAKiD,EAAL,CAIA,GAAI7O,GAAa6O,EAAc7O,UAM/B,IALA6O,EAAcE,mBAAmB,cAAeF,EAAcV,aAC9DU,EAAc9O,SAEdC,EAAWgP,YAEPtR,KAAK4N,UAEP,IAAK,GAAIpH,GAAI,EAAGA,EAAIlE,EAAW+N,WAAW5J,OAAQD,IAChD,GAAIlE,EAAW+N,WAAW7J,GAAG0J,WAAaC,KAAKC,UAAW,CACxD1C,YAAcpL,EAAW+N,WAAW7J,EACpC,WAORmB,kBAAkByF,QAAQC,IAAIyD,oBAAsB,SAASS,GAC3D,GAAKvR,KAAKwN,iBAAV,CAIA,IAAKxN,KAAK4N,UAER,WADA1J,SAAQC,IAAI,YAAcoN,EAI5BvR,MAAKkR,kBAEL,IAAIM,GAAgBxR,KAAK2N,cAAc8D,OAAOF,GAC1CG,EAASH,EAAWC,EAAcG,OAAO,SAC7CD,GAAkBH,EAATG,EAAoB1R,KAAK2N,cAAclH,OAASiL,CAEzD,IAAIP,GAAgBrQ,SAASC,cAAc,OAC3CoQ,GAAczO,GAAKiF,kBAAkByF,QAAQC,IAAIa,YACjD,IAAI0D,GAAQ9Q,SAAS+Q,aACrBD,GAAME,SAAS9R,KAAK0N,YAAa6D,GACjCK,EAAMG,OAAO/R,KAAK0N,YAAagE,GAC/BE,EAAMI,iBAAiBb,IAKzB,IAAIxJ,mBAAoBA,qBAExBA,mBAAkBxG,QAAU,WAC1BnB,KAAKiS,SAAU,EAEfjS,KAAKiK,KAAO,IAIdtC,kBAAkBxG,QAAQlB,UAAUuB,KAAO,WACzC0C,QAAQC,IAAI,QACZnE,KAAKkS,aAAepR,SAASmM,qBAAqB,QAAQ,GAC1DjN,KAAKmS,qBACLnS,KAAKuF,UAAY,GAAI3I,aAAY8D,GAAGC,UAAUX,KAAKkS,cACnDlS,KAAKoS,KAAO,GAAIzK,mBAAkBmB,YAAYC,SAAS/I,MAEvDA,KAAKuF,UAAUvE,OAAO6C,oBACtB7D,KAAKuF,UAAUvE,OAAO4C,eAAe5D,KAAK6B,KAAKpB,KAAKT;AAGpD+C,OAAOiC,QAAQC,aACPC,OAAQyC,kBAAkB9K,UAAU0C,QAAQ2I,UAC3C,SAAS/C,GACVjB,QAAQC,IAAI,YACZD,QAAQC,IAAIgB,GACI,KAAbA,GACDnF,KAAKiK,KAAO9E,EAAS8E,KACrBjK,KAAKqS,WAAalN,EAASkN,WAC3BrS,KAAKsS,QAAUnN,EAASmN,QACxBtS,KAAK4L,mBAEL5L,KAAKiK,KAAO,GACZjK,KAAKqS,WAAa,GAClBrS,KAAKsS,QAAU,KAEjB7R,KAAKT,OACbA,KAAKuS,eAGP5K,kBAAkBxG,QAAQlB,UAAUuS,OAAS,SAASrS,GACjDA,GACDA,EAAEsS,kBAEDzS,KAAKiS,QACNjS,KAAK6B,OAEL7B,KAAK0B,QAITiG,kBAAkBxG,QAAQlB,UAAUsS,YAAc,WAChDxP,OAAOiC,QAAQ0N,UAAUH,YAAY,SAASI,GACzCA,GAA8B,yBAAnBA,EAAQzN,QACpBlF,KAAKwS,UAEP/R,KAAKT,QAGT2H,kBAAkBxG,QAAQlB,UAAUyB,KAAO,WACzC1B,KAAKiS,SAAU,EACfjS,KAAKuF,UAAU7D,OACf1B,KAAKoS,KAAK5Q,QAGZmG,kBAAkBxG,QAAQlB,UAAU4B,KAAO,WACzC7B,KAAKiS,SAAU,EACfjS,KAAKuF,UAAU1D,QAGjB8F,kBAAkBxG,QAAQlB,UAAU2S,WAAa,WAC/C7P,OAAOiC,QAAQC,aACbC,OAAQyC,kBAAkB9K,UAAU0C,QAAQsT,aAC3C,SAAS1N,GACPA,GACDnF,KAAK8S,QAAU3N,EAAS2N,QACxB9S,KAAKiK,KAAO9E,EAAS8E,MAErB/F,QAAQC,IAAI,wCAEd1D,KAAKT,QAIT2H,kBAAkBxG,QAAQlB,UAAU8S,UAAY,WAC9CjS,SAASZ,iBAAiB,mBAAoBF,KAAKwB,KAAKf,KAAKT,OAAO,IAItE2H,kBAAkBxG,QAAQlB,UAAU2L,eAAiB,WACnD5L,KAAKgT,uBAAuBhT,KAAKkS,eAGnCvK,kBAAkBxG,QAAQlB,UAAU+S,uBAAyB,SAASC,GACpE,GAAGA,EAAS,CACVjT,KAAKkT,sBAAsBD,EAC3B,KAEE,IAAK,GADDE,GAAcF,EAAQhG,qBAAqB,KACtCzG,EAAI,EAAGA,EAAI2M,EAAY1M,OAAQD,IACtCxG,KAAKkT,sBAAsBC,EAAY3M,IAEzC,MAAMrG,OAMZwH,kBAAkBxG,QAAQlB,UAAUuM,QAAU,SAASvC,GACrDjK,KAAKiK,KAAOA,GAGdtC,kBAAkBxG,QAAQlB,UAAUwM,QAAU,WAC5C,MAAOzM,MAAKiK,MAGdtC,kBAAkBxG,QAAQlB,UAAU0L,cAAgB,SAAS0G,GAC3DrS,KAAKqS,WAAaA,GAGpB1K,kBAAkBxG,QAAQlB,UAAU8L,cAAgB,WAClD,MAAO/L,MAAKqS,YAGd1K,kBAAkBxG,QAAQlB,UAAUiT,sBAAwB,SAASD,GACpE,GAAIG,GAAgBtS,SAASuS,YAAYC,iBAAiBL,EAAQ,KAC9DA,GAAQtR,QACc,KAApB3B,KAAKqS,YAC+B,uBAAlCe,EAAcG,kBACfN,EAAQtR,MAAM4R,gBAAkBvT,KAAKqS,YAGxB,KAAdrS,KAAKiK,KACNgJ,EAAQO,gBAAgB,gBAEP,oCAAdxT,KAAKiK,KAGRgJ,EAAQtR,MAAM8R,WAAazT,KAAKiK,QAKtCtC,kBAAkBxG,QAAQlB,UAAUkS,mBAAqB,WACvDrR,SAASZ,iBAAiB,kBAAmBF,KAAK0T,eAAejT,KAAKT,OAAO,IAG/E2H,kBAAkBxG,QAAQlB,UAAUyM,WAAa,WAC/C1M,KAAKiK,KAAO,GACZjK,KAAK4L,kBAGPjE,kBAAkBxG,QAAQlB,UAAUqM,iBAAmB,WACrDtM,KAAKqS,WAAa,GAClBrS,KAAK4L,kBAGPjE,kBAAkBxG,QAAQlB,UAAUyT,eAAiB,SAASvT,GAC5D,GAAIwT,GAASxT,EAAEwT,MACZA,IACF3T,KAAKgT,uBAAuBW,GAI/B,IAAIC,0BAA2B,GAAIjM,mBAAkBxG,OACrDyS,0BAAyBpS","file":"scripts/contentscript.js","sourcesContent":["'use strict';\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\nautocharlie.constants.CLASS_NAME_PREFIX = 'autocharlie-material-content-';\n\nautocharlie.constants.ClassName = {\n  MODAL_HEADER: autocharlie.constants.CLASS_NAME_PREFIX + 'header',\n  MODAL_FOOTER: autocharlie.constants.CLASS_NAME_PREFIX + 'footer',\n  MODAL_CONTENT: autocharlie.constants.CLASS_NAME_PREFIX + 'content',\n  MODAL_CONTAINER: autocharlie.constants.CLASS_NAME_PREFIX + 'container',\n  FAB: autocharlie.constants.CLASS_NAME_PREFIX + 'fab',\n  CARD: autocharlie.constants.CLASS_NAME_PREFIX + 'card',\n  LIGHT_BOX: autocharlie.constants.CLASS_NAME_PREFIX + 'lightbox',\n  DARK_BOX: autocharlie.constants.CLASS_NAME_PREFIX + 'darkbox',\n  BUTTON: autocharlie.constants.CLASS_NAME_PREFIX + 'button',\n  LEFT_ICON_CONTAINER: autocharlie.constants.CLASS_NAME_PREFIX + 'left-icon-container',\n  RIGHT_ICON_CONTAINER: autocharlie.constants.CLASS_NAME_PREFIX + 'right-icon-container',\n  INNER_HEADER: autocharlie.constants.CLASS_NAME_PREFIX + 'inner-header',\n  RIGHT_ICON: autocharlie.constants.CLASS_NAME_PREFIX + 'right-icon',\n  LEFT_ICON: autocharlie.constants.CLASS_NAME_PREFIX + 'left-icon',\n  TABS_CONTAINER: autocharlie.constants.CLASS_NAME_PREFIX + 'tabs',\n  TAB: autocharlie.constants.CLASS_NAME_PREFIX + 'tab',\n  TAB_INDICATOR: autocharlie.constants.CLASS_NAME_PREFIX + 'tab-indicator',\n  TABS_DIVS_CONTAINER: autocharlie.constants.CLASS_NAME_PREFIX + 'tabs-div-container',\n  TABS_DIV: autocharlie.constants.CLASS_NAME_PREFIX + 'tabs-div',\n  TABS_DIVS_INNER: autocharlie.constants.CLASS_NAME_PREFIX + 'tabs-div-inner',\n  PADDING: autocharlie.constants.CLASS_NAME_PREFIX + 'padding'\n};\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\nautocharlie.constants.Copy = {\n  SUBMIT_FEEDBACK: 'Submit Feedback',\n  SEND: 'Send',\n  FEEDBACK: 'Feedback',\n  EMAIL_ADDRESS: 'Email Address'\n};\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\n\nautocharlie.constants.ID_NAME_PREFIX = 'autocharlie-material-content-';\n\nautocharlie.constants.Id = {\n  HEADER_CONTAINER: autocharlie.constants.ID_NAME_PREFIX + 'header',\n  FOOTER_CONTAINER: autocharlie.constants.ID_NAME_PREFIX + 'footer',\n  CONTENT_CONTAINER: autocharlie.constants.ID_NAME_PREFIX + 'content',\n  FEEBACK_INPUT: autocharlie.constants.ID_NAME_PREFIX + 'feedback-input',\n  FEEBACK_EMAIL: autocharlie.constants.ID_NAME_PREFIX + 'feedback-email'\n};\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\n\nautocharlie.constants.IMAGE_FOLDER = 'images/';\n\nautocharlie.constants.Images = {\n  HEADER_LOGO: autocharlie.constants.IMAGE_FOLDER + 'Logo.png',\n  HEADER_HAMBURGER: autocharlie.constants.IMAGE_FOLDER + 'Header_Hamburger.png',\n  HEADER_CLOSE: autocharlie.constants.IMAGE_FOLDER + 'Header_Close.png',\n  HEADER_FEEDBACK: autocharlie.constants.IMAGE_FOLDER + 'Header_Feedback.png'\n};\n\n\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\nautocharlie.constants.Message = {\n  SEND_FEEDBACK: 'sendFeedback'\n};\n\n\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.constants = autocharlie.constants || {};\n\nautocharlie.constants.Names = {\n  APP: 'MultiSignature'\n};\n\n\r\n\n\nvar autocharlie = autocharlie || {};\nautocharlie.services = autocharlie.services || {};\n\n\nautocharlie.services.PasteInterceptor = function(elem, callback, propagate) {\n  this.elem = elem;\n  this.callback = callback;\n  this.propagate = propagate || false;\n};\n\n\nautocharlie.services.PasteInterceptor.prototype.addEventListener = function() {\n  this.elem.addEventListener('paste', function(e) {\n    if(!this.propagate) {\n      e.preventDefault();\n    }\n    var text = (e.originalEvent || e).clipboardData.getData('text/html') || '';\n    this.callback(text);\n  }.bind(this), false);\n};\r\n\n\n//Namespace\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\n/**\n * Container Class for injecting a Material Design Container onto the stage.\n * @param body\n */\nautocharlie.ui.Container = function(body) {\n  this.containerDiv = document.createElement('div');\n  this.header = new autocharlie.ui.Header(this);\n  this.content = new autocharlie.ui.Content(this);\n  this.footer = new autocharlie.ui.Footer(this);\n\n  this.containerDiv.className = autocharlie.constants.ClassName.MODAL_CONTAINER;\n  body.appendChild(this.containerDiv);\n\n  this.header.init();\n  this.content.init();\n  this.footer.init();\n\n  this.header.setHeader(autocharlie.constants.Names.APP);\n\n  return this;\n};\n\nautocharlie.ui.Container.prototype.show = function() {\n  this.containerDiv.style.display = 'block';\n};\n\nautocharlie.ui.Container.prototype.hide = function() {\n  this.containerDiv.style.display = 'none';\n};\n\nautocharlie.ui.Container.prototype.get = function() {\n  return this.containerDiv;\n};\n\nautocharlie.ui.Container.prototype.getHeader = function() {\n  return this.header;\n};\n\nautocharlie.ui.Container.prototype.getContent = function() {\n  return this.content;\n};\n\nautocharlie.ui.Container.prototype.getFooter = function() {\n  return this.footer;\n};\n\n\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Content = function(parent) {\n  this.parent = parent;\n};\n\nautocharlie.ui.Content.prototype.clear = function() {\n  this.content.innerHTML = '';\n  return this.content;\n};\n\nautocharlie.ui.Content.prototype.remove = function() {\n  this.content.parentNode.removeChild(this.content);\n};\n\nautocharlie.ui.Content.prototype.get = function() {\n  return this.content;\n};\n\nautocharlie.ui.Content.prototype.show = function() {\n  this.content.style.display = 'block';\n};\n\nautocharlie.ui.Content.prototype.hide = function() {\n  this.content.style.display = 'none';\n};\n\nautocharlie.ui.Content.prototype.init = function() {\n  this.content = document.createElement('div');\n  this.content.className = autocharlie.constants.ClassName.MODAL_CONTENT;\n  this.parent.get().appendChild(this.content);\n};\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Fab = function(parent) {\n  this.parent = parent;\n};\n\nautocharlie.ui.Fab.prototype.clear = function() {\n  this.content.innerHTML = '';\n  return this.content;\n};\n\nautocharlie.ui.Fab.prototype.remove = function() {\n  this.content.parentNode.removeChild(this.content);\n};\n\nautocharlie.ui.Fab.prototype.get = function() {\n  return this.content;\n};\n\nautocharlie.ui.Fab.prototype.show = function() {\n  this.content.style.display = 'block';\n};\n\nautocharlie.ui.Fab.prototype.hide = function() {\n  this.content.style.display = 'none';\n};\n\nautocharlie.ui.Fab.prototype.init = function(callback) {\n  this.content = document.createElement('div');\n  this.content.innerHTML = '+';\n  this.content.className = autocharlie.constants.ClassName.FAB;\n  this.parent.get().appendChild(this.content);\n  if(callback) {\n    this.content.addEventListener('click', callback, false);\n  }\n};\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Footer = function(parent) {\n  this.parent = parent;\n};\n\nautocharlie.ui.Footer.prototype.clear = function() {\n  this.modalFooter.innerHTML = '';\n  return this.modalFooter;\n};\n\nautocharlie.ui.Footer.prototype.remove = function() {\n  this.modalFooter.parentNode.removeChild(this.modalFooter);\n};\n\nautocharlie.ui.Footer.prototype.get = function() {\n  return this.modalFooter;\n};\n\nautocharlie.ui.Footer.prototype.show = function() {\n  this.modalFooter.style.display = 'block';\n};\n\nautocharlie.ui.Footer.prototype.hide = function() {\n  this.modalFooter.style.display = 'none';\n};\n\nautocharlie.ui.Footer.prototype.init = function() {\n  this.modalFooter = document.createElement('div');\n  this.modalFooter.className = autocharlie.constants.ClassName.MODAL_FOOTER;\n  this.modalFooter.id = autocharlie.constants.Id.FOOTER_CONTAINER;\n  this.parent.get().appendChild(this.modalFooter);\n};\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Header = function(parent) {\n  this.parent = parent;\n};\n\nautocharlie.ui.Header.prototype.clear = function() {\n  this.innerHeader.innerHTML = '';\n  this.clearIcons();\n  return this.header;\n};\n\nautocharlie.ui.Header.prototype.remove = function() {\n  this.header.parentNode.removeChild(this.header);\n};\n\nautocharlie.ui.Header.prototype.setHeader = function(content) {\n  if(content === autocharlie.constants.Names.APP) {\n    this.innerHeader.innerHTML = '';\n    var newLogo = document.createElement('img');\n    newLogo.src = chrome.extension.getURL(autocharlie.constants.Images.HEADER_LOGO);\n    this.innerHeader.appendChild(newLogo);\n  } else {\n    this.innerHeader.innerHTML = content;\n  }\n  return this.header;\n};\n\nautocharlie.ui.Header.prototype.clearIcons = function() {\n  this.leftIcons.innerHTML = '';\n  this.rightIcons.innerHTML = '';\n};\n\nautocharlie.ui.Header.prototype.addMenuBtn = function(callback) {\n  this.addLeftIcon(autocharlie.constants.Images.HAMBURGER, callback);\n};\n\nautocharlie.ui.Header.prototype.addLeftIcon = function(iconUrl, optCallback, optClass) {\n  var newIcon = document.createElement('img');\n  var additionalClass = '';\n  if(optClass) { additionalClass += ' ' + optClass; }\n  newIcon.className = autocharlie.constants.ClassName.LEFT_ICON + additionalClass;\n  newIcon.src = chrome.extension.getURL(iconUrl);\n  newIcon.addEventListener('click', optCallback);\n  this.leftIcons.appendChild(newIcon);\n  return newIcon;\n};\n\nautocharlie.ui.Header.prototype.addCloseButton = function(callback) {\n  return this.addLeftIcon(autocharlie.constants.Images.HEADER_CLOSE, callback);\n};\n\nautocharlie.ui.Header.prototype.addFeedbackButton = function() {\n  this.addRightIcon(\n    autocharlie.constants.Images.HEADER_FEEDBACK,\n    function() {\n      this.lightbox = new autocharlie.ui.LightBox(this.parent.get());\n      var feedbackInput = document.createElement('div');\n      console.log('ids');\n      console.log(autocharlie.constants.Id);\n      var details = new autocharlie.ui.Input(\n        autocharlie.constants.Copy.FEEDBACK, autocharlie.constants.Id.FEEDBACK_INPUT);\n      feedbackInput.appendChild(details.get());\n      var email = new autocharlie.ui.Input(\n        autocharlie.constants.Copy.EMAIL_ADDRESS, autocharlie.constants.Id.FEEDBACK_EMAIL);\n      feedbackInput.appendChild(email.get());\n      var submitButton = document.createElement('button');\n      submitButton.className = autocharlie.constants.ClassName.BUTTON;\n      submitButton.innerHTML = autocharlie.constants.Copy.SEND;\n      submitButton.addEventListener('click', function() {\n        var gottenEmail = document.getElementById(autocharlie.constants.Id.FEEDBACK_EMAIL).value;\n        console.log(gottenEmail);\n        var gottenFeedback = document.getElementById(autocharlie.constants.Id.FEEDBACK_INPUT).value;\n        var createdFeedback = {\n          'email': gottenEmail,\n          'feedback': gottenFeedback\n        };\n        console.log(createdFeedback);\n        chrome.runtime.sendMessage({\n          method: autocharlie.constants.Message.SEND_FEEDBACK,\n          feedback: createdFeedback\n        }, function(response) {\n          console.log(response);\n          this.lightbox.remove();\n        }.bind(this));\n      }.bind(this), false);\n      feedbackInput.appendChild(submitButton);\n      this.lightbox.init(\n        feedbackInput,\n        autocharlie.constants.Copy.SUBMIT_FEEDBACK);\n    }.bind(this)\n    );\n};\n\nautocharlie.ui.Header.prototype.addRightIcon = function(iconUrl, optCallback, optClass) {\n  var newIcon = document.createElement('img');\n  var additionalClass = '';\n  if(optClass) { additionalClass += ' ' + optClass; }\n  newIcon.className = autocharlie.constants.ClassName.RIGHT_ICON + additionalClass;\n  newIcon.src = chrome.extension.getURL(iconUrl);\n  newIcon.addEventListener('click', optCallback);\n  this.rightIcons.appendChild(newIcon);\n  return newIcon;\n};\n\nautocharlie.ui.Header.prototype.init = function() {\n  this.header = document.createElement('div');\n  this.header.className = autocharlie.constants.ClassName.MODAL_HEADER;\n  this.header.id = autocharlie.constants.Id.HEADER_CONTAINER;\n  this.parent.get().appendChild(this.header);\n\n  this.leftIcons = document.createElement('div');\n  this.leftIcons.className = autocharlie.constants.ClassName.LEFT_ICON_CONTAINER;\n  this.leftIcons.id = autocharlie.constants.Id.HEADER_LEFT_ICONS;\n  this.header.appendChild(this.leftIcons);\n\n  this.innerHeader = document.createElement('div');\n  this.innerHeader.className = autocharlie.constants.ClassName.INNER_HEADER;\n  this.innerHeader.id = autocharlie.constants.Id.INNER_HEADER;\n  this.header.appendChild(this.innerHeader);\n\n  this.rightIcons = document.createElement('div');\n  this.rightIcons.className = autocharlie.constants.ClassName.RIGHT_ICON_CONTAINER;\n  this.rightIcons.id = autocharlie.constants.Id.HEADER_RIGHT_ICONS;\n  this.header.appendChild(this.rightIcons);\n};\n\nautocharlie.ui.Header.prototype.get = function() {\n  return this.header;\n};\n\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Input = function(placeholder, id) {\n  this.placeholder = placeholder;\n  this.container = document.createElement('div');\n  this.id = id;\n  this.init();\n  return this;\n};\n\nautocharlie.ui.Input.ClassName = {\n  CONTAINER: 'auto-char-input-container',\n  LABEL: 'auto-char-input-label',\n  INPUT: 'auto-char-input-input',\n  FOCUSED: 'auto-char-input-container-focused'\n};\n\n//First we ask what url and then return it to the user\nautocharlie.ui.Input.prototype.init = function() {\n  this.container.className = autocharlie.ui.Input.ClassName.CONTAINER;\n  this.container.innerHTML = '';\n\n  this.label = document.createElement('label');\n  this.label.className = autocharlie.ui.Input.ClassName.LABEL;\n  this.label.innerHTML = this.placeholder;\n  this.container.appendChild(this.label);\n\n  this.input = document.createElement('input');\n  this.input.className = autocharlie.ui.Input.ClassName.INPUT;\n\n  console.log('id is');\n  console.log(this.id);\n\n\n  if(this.id) {\n    console.log('here');\n    this.input.id = this.id;\n  }\n\n  this.container.appendChild(this.input);\n};\n\n\nautocharlie.ui.Input.prototype.get = function() {\n  return this.container;\n};\n\n\nautocharlie.ui.Input.prototype.getInput = function() {\n  return this.input;\n};\n\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.LightBox = function(container, closeCallback, darkBoxHide) {\n  this.container = container;\n  this.closeCallback = closeCallback;\n  this.darkBoxHide = darkBoxHide || true;\n  return this;\n};\n\nautocharlie.ui.LightBox.prototype.get = function() {\n  return this.lightBox;\n};\n\nautocharlie.ui.LightBox.prototype.show = function() {\n  this.modalFooter.style.display = 'block';\n};\n\nautocharlie.ui.LightBox.prototype.remove = function() {\n  this.container.removeChild(this.darkBox);\n  this.container.removeChild(this.lightBox);\n  if(this.closeCallback) {\n    this.closeCallback();\n  }\n};\n\nautocharlie.ui.LightBox.prototype.init = function(content, headerText) {\n  this.lightBox = document.createElement('div');\n  this.lightBox.className = autocharlie.constants.ClassName.LIGHT_BOX;\n  this.container.appendChild(this.lightBox);\n  console.log(headerText);\n  if(headerText && headerText !== '') {\n    this.header = document.createElement('h3');\n    this.headerText = document.createElement('div');\n    this.headerText.innerHTML = headerText;\n    this.header.appendChild(this.headerText);\n    this.lightBox.appendChild(this.header);\n  }\n\n  if(content) {\n    this.lightBox.appendChild(content);\n  }\n  this.darkBox = document.createElement('div');\n  this.darkBox.className = autocharlie.constants.ClassName.DARK_BOX;\n\n  if(this.darkBoxHide) {\n    this.darkBox.addEventListener('click', function() {\n      this.remove();\n    }.bind(this), false);\n  }\n\n  this.container.appendChild(this.darkBox);\n};\r\n\n\n//Namespace for TTS\nvar autocharlie = autocharlie || {};\nautocharlie.ui = autocharlie.ui || {};\n\nautocharlie.ui.Tabs = function(insertionDiv, tabDetails) {\n  this.insertionDiv = insertionDiv;\n  this.tabDetails = tabDetails;\n  this.tabsContainer = document.createElement('ul');\n  this.tabsContainer.className = autocharlie.constants.ClassName.TABS_CONTAINER;\n\n  for(var i = 0; i < this.tabDetails.length; i++) {\n    this.createTabButton(i);\n  }\n  this.indicator = document.createElement('div');\n  this.indicator.className = autocharlie.constants.ClassName.TAB_INDICATOR;\n  this.indicator.style.width = 100 / this.tabDetails.length + '%';\n  this.indicator.style.left = '0px';\n  this.tabsContainer.appendChild(this.indicator);\n  this.insertionDiv.appendChild(this.tabsContainer);\n\n  this.tabsDivContainer = document.createElement('div');\n  this.tabsDivContainer.className = autocharlie.constants.ClassName.TABS_DIVS_CONTAINER;\n  this.tabsDivContainer.style.width = '100%';\n\n  this.tabsInnerDivContainer = document.createElement('div');\n  this.tabsInnerDivContainer.className = autocharlie.constants.ClassName.TABS_DIVS_INNER;\n  this.tabsInnerDivContainer.style.width = 100 * tabDetails.length + '%';\n\n  this.tabsDivContainer.appendChild(this.tabsInnerDivContainer);\n\n  for(var j = 0; j < tabDetails.length; j++) {\n    var actualTab = tabDetails[j];\n    var actualTabDiv = document.createElement('div');\n    tabDetails[j].containerDiv = actualTabDiv;\n    actualTabDiv.className = autocharlie.constants.ClassName.TABS_DIV;\n    actualTabDiv.appendChild(actualTab.div);\n    actualTabDiv.style.width = 100 / tabDetails.length + '%';\n    //actualTabDiv.style.left = 100 / tabDetails.length * j + '%';\n    actualTabDiv.style.left = '0%';\n    this.tabsInnerDivContainer.appendChild(actualTabDiv);\n  }\n  this.insertionDiv.appendChild(this.tabsDivContainer);\n};\n\n\nautocharlie.ui.Tabs.prototype.createTabButton = function(i) {\n    var tab = this.tabDetails[i];\n    var tabDiv = document.createElement('li');\n    this.tabDetails.button = tabDiv;\n    tabDiv.className = autocharlie.constants.ClassName.TAB;\n    tabDiv.innerHTML = tab.name;\n    tabDiv.style.width = 100 / this.tabDetails.length + '%';\n    this.tabsContainer.appendChild(tabDiv);\n    tabDiv.addEventListener('click', function() {\n      //this.indicator.style.left = i * (100 / this.tabDetails.length) + '%';\n      var y = i * (100 / this.tabDetails.length);\n      //this.indicator.style.transform = 'translate3d(' + y + '%, 0px, 0px)';\n      this.indicator.style.left = y + '%';\n      //this.tabsInnerDivContainer.style.marginRight = i * 100 + '%';\n      var x = i * (100 / this.tabDetails.length);\n      this.tabsInnerDivContainer.style.transform = 'translate3d(-' + x + '%, 0px, 0px)';\n    }.bind(this));\n  };\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.constants = dyslexiaextension.constants || {};\n\ndyslexiaextension.constants.Message = {\n  TURN_ON_FONT: 'turnOnFont',\n  TURN_OFF_FONT: 'turnOffFont',\n  GET_FONT: 'getFont',\n  SEND_FEEDBACK: 'sendFeedback',\n  TURN_ON_BACKGROUND: 'turnOnBackground',\n  TURN_OFF_BACKGROUND: 'turnOffBackground',\n  GET_BACKGROUND: 'getBackground',\n  GET_INIT: 'getInit'\n};\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.Constants = dyslexiaextension.Constants || {};\n\n\ndyslexiaextension.Constants.CLASS_NAME_PREFIX = 'multi-sig-ext-';\n\ndyslexiaextension.Constants.ClassName = {\n  EXAMPLE: 'example',\n  SIG_HTML: dyslexiaextension.Constants.CLASS_NAME_PREFIX + 'sig-html'\n};\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.Constants = dyslexiaextension.Constants || {};\n\ndyslexiaextension.Constants.Copy = {\n  SIGNATURES: 'Signatures',\n  RULES: 'Rules',\n  RULES_PREVIEW: 'Here you will be able to set rules as to which signature to use when.' +\n    'This is currently in development, if you are interested in this feature please message ' +\n    'us using the feedback button in the top right with what you would like rules to do.'\n};\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.Constants = dyslexiaextension.Constants || {};\n\ndyslexiaextension.Constants.ID_PREFIX = 'multi-sig-ext-';\n\ndyslexiaextension.constants.Ids = {\n  TOOLBAR: dyslexiaextension.Constants.CLASS_NAME_PREFIX + 'toobar',\n  TEXTAREA: dyslexiaextension.Constants.CLASS_NAME_PREFIX + 'textarea'\n};\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.Constants = dyslexiaextension.Constants || {};\n\n\ndyslexiaextension.Constants.IMAGE_DIRECTORY = 'images/';\n\ndyslexiaextension.Constants.Images = {\n  HEADER_LOGO: dyslexiaextension.Constants.IMAGE_DIRECTORY + 'Logo.png'\n};\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\ndyslexiaextension.controllers = dyslexiaextension.controllers || {};\n\ndyslexiaextension.controllers.HomeCtrl = function(parent) {\n  this.container = parent.container;\n  this.parent = parent;\n  this.content = this.container.getContent();\n  this.currentMessage = parent.currentMessage;\n  this.signatureList = null;\n};\n\ndyslexiaextension.controllers.HomeCtrl.Copy = {\n  HELP: 'Aid',\n  EMPATHY: 'Empathy',\n  WELCOME: 'Welcome to Dyslexia Extension find below a list of ways to make your internet experience a little easier' +\n    ' or select the Empathy tab to experience ways to see through Dyslexics eyes.',\n  EMPATHY_WELCOME: 'Although its not possible to truly experience being Dyslexic, feel free to use the tools below to try.',\n  FONTS: 'Fonts',\n  FONTS_HELP: 'You can add these fonts to every element on the page, either click the \"Add\" button to add it to one webites or ' +\n    ' turn on button which will add it to every website.',\n  SCRIPTS: 'Scripts',\n  SCRIPTS_HELP: 'These help show dyslexia by jumbling letters around',\n  ADD_TO_PAGE: 'Add to Page',\n  BACKGROUND_COLOR: 'Background Color Change'\n};\n\ndyslexiaextension.controllers.HomeCtrl.Class = {\n  ON_BUTTON: 'on-button',\n  OFF_BUTTON: 'off-button',\n  BACKGROUND_OFF_BUTTON: 'bg-off-button',\n  BACKGROUND_ON_BUTTON: 'bg-on-button'\n};\n\ndyslexiaextension.controllers.HomeCtrl.FONTS = [\n  {\n    font: 'Dyslexia-Extension-LexieReadable-Bold',\n    name: 'LexieReadable Bold'\n  },\n  {\n    font: 'Dyslexia-Extension-LexieReadable-Regular',\n    name: 'LexieReadable'\n  },\n  {\n    font: 'Dyslexia-Extension-Nisaba',\n    name: 'Nisaba'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexic-Bold',\n    name: 'OpenDyslexic Bold'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexic-BoldItalic',\n    name: 'OpenDyslexic Bold Italics'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexic-Italic',\n    name: 'OpenDyslexic Italics'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexic-Regular',\n    name: 'OpenDyslexic'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexicAlta-Bold',\n    name: 'OpenDyslexic Alta Bold'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexicAlta-BoldItalic',\n    name: 'OpenDyslexic Bold Italics'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexicAlta-Italic',\n    name: 'OpenDyslexic Italics'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexicAlta-Regular',\n    name: 'OpenDyslexic Alta'\n  },\n  {\n    font: 'Dyslexia-Extension-OpenDyslexicMono-Regular',\n    name: 'OpenDyslexic Mono'\n  }\n];\n\ndyslexiaextension.controllers.HomeCtrl.PASTEL_COLORS = [\n  {\n    hex: '#FCFCE9',\n    name: 'Yellow'\n  },\n  {\n    hex: '#E7FFDF',\n    name: 'Green'\n  },\n  {\n    hex: '#ECF4FF',\n    name: 'Blue'\n  },\n  {\n    hex: '#FFEEFB',\n    name: 'Pink'\n  }\n];\n\n\ndyslexiaextension.controllers.HomeCtrl.EMPATHY_FONTS = [\n  {\n    font: 'Dyslexia-Extension-DyslexicView',\n    name: 'Dyslexic View'\n  }\n];\n\ndyslexiaextension.controllers.HomeCtrl.Urls = {\n  LOG_IN: 'http://www.startuppilots.com/authentication/signin'\n};\n\ndyslexiaextension.controllers.HomeCtrl.prototype.init = function() {\n\n  this.container.content.clear();\n\n  this.helpList = document.createElement('div');\n  this.helpList.className = autocharlie.constants.ClassName.PADDING;\n\n  this.empathyList = document.createElement('div');\n  this.empathyList.className = autocharlie.constants.ClassName.PADDING;\n\n  var tabsInfo = [{\n    name: dyslexiaextension.controllers.HomeCtrl.Copy.HELP,\n    div: this.helpList,\n    active: true\n  }, {\n    name: dyslexiaextension.controllers.HomeCtrl.Copy.EMPATHY,\n    div: this.empathyList,\n    active: false\n  }];\n\n  var tab = new autocharlie.ui.Tabs(this.content.get(), tabsInfo);\n\n  //Setup user receiver\n\n  this.setupHelpList();\n  this.setupEmpathyList();\n\n/*\n  this.fab = new autocharlie.ui.Fab(this.container.content);\n  this.fab.init(this.checkAffiliate.bind(this)); //TODO Callback\n  */\n};\n\ndyslexiaextension.controllers.HomeCtrl.prototype.setupHelpList = function() {\n  var welcomeText = document.createElement('p');\n  welcomeText.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.WELCOME;\n  this.helpList.appendChild(welcomeText);\n\n  var colorHeader = document.createElement('h2');\n  colorHeader.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.BACKGROUND_COLOR;\n  this.helpList.appendChild(colorHeader);\n\n  var colorContainer = document.createElement('table');\n  for(var j = 0; j < dyslexiaextension.controllers.HomeCtrl.PASTEL_COLORS.length; j++) {\n    this.addColorToUi(colorContainer, dyslexiaextension.controllers.HomeCtrl.PASTEL_COLORS[j]);\n  }\n  this.helpList.appendChild(colorContainer);\n\n  var fontHeader = document.createElement('h2');\n  fontHeader.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.FONTS;\n  this.helpList.appendChild(fontHeader);\n\n  var fontHelp = document.createElement('p');\n  fontHelp.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.FONTS_HELP;\n  this.helpList.appendChild(fontHelp);\n\n  var fontContainer = document.createElement('table');\n  for(var i = 0; i < dyslexiaextension.controllers.HomeCtrl.FONTS.length; i++) {\n    this.addFontToUi(fontContainer, dyslexiaextension.controllers.HomeCtrl.FONTS[i]);\n  }\n  this.helpList.appendChild(fontContainer);\n};\n\ndyslexiaextension.controllers.HomeCtrl.prototype.addColorToUi = function(bgContainer, backgroundname) {\n  var fontTR = document.createElement('tr');\n  bgContainer.appendChild(fontTR);\n\n  var fontTDName = document.createElement('td');\n  fontTDName.innerHTML = backgroundname.name;\n  fontTR.appendChild(fontTDName);\n\n  var fontActualTDAdd = document.createElement('td');\n  fontTR.appendChild(fontActualTDAdd);\n\n  var fontTDAdd = document.createElement('button');\n  fontTDAdd.innerHTML = '+';\n  fontActualTDAdd.appendChild(fontTDAdd);\n\n  fontTDAdd.addEventListener('click', function() {\n    console.log(this.parent);\n    this.parent.setBackground(backgroundname.hex);\n    this.parent.insertOntoBody();\n  }.bind(this), false);\n\n  var fontActualTDOn = document.createElement('td');\n  fontTR.appendChild(fontActualTDOn);\n\n  var fontTDOn = document.createElement('button');\n  fontTDOn.innerHTML = 'ON';\n  fontTDOn.className = dyslexiaextension.controllers.HomeCtrl.Class.ON_BUTTON;\n  fontActualTDOn.appendChild(fontTDOn);\n\n  if(this.parent.getBackground() === backgroundname.hex) {\n    fontTDOn.style.display = 'none';\n  }\n\n  var fontActualTDOff = document.createElement('td');\n  fontTR.appendChild(fontActualTDOff);\n\n  var fontTDOff = document.createElement('button');\n  fontTDOff.innerHTML = 'OFF';\n\n  if(this.parent.getBackground() !== backgroundname.hex) {\n    fontTDOff.style.display = 'none';\n  }\n\n  fontTDOff.className = dyslexiaextension.controllers.HomeCtrl.Class.BACKGROUND_OFF_BUTTON;\n  fontActualTDOff.appendChild(fontTDOff);\n  fontTDOn.addEventListener('click', function() {\n    //Apply now\n    this.parent.setBackground(backgroundname.hex);\n    this.parent.insertOntoBody();\n    //Save details\n\n      chrome.runtime.sendMessage({\n          method: dyslexiaextension.constants.Message.TURN_ON_BACKGROUND,\n          color: backgroundname\n        }, function() {\n          console.log('Color Set');\n        });\n\n    //Ensure all other font UIs are set to off\n    var onButtons = document.getElementsByClassName(\n      dyslexiaextension.controllers.HomeCtrl.Class.BACKGROUND_ON_BUTTON);\n    for(var i = 0; i < onButtons.length; i++) {\n      onButtons[i].style.display = 'block';\n    }\n\n    var offButtons = document.getElementsByClassName(\n      dyslexiaextension.controllers.HomeCtrl.Class.BACKGROUND_OFF_BUTTON);\n    for(var j = 0; j < offButtons.length; j++) {\n      offButtons[j].style.display = 'none';\n    }\n\n    //Display off button\n    fontTDOn.style.display = 'none';\n    fontTDOff.style.display = 'block';\n  }.bind(this));\n\n  fontTDOff.addEventListener('click', function() {\n    this.parent.removeBackground();\n\n    chrome.runtime.sendMessage({\n          method: dyslexiaextension.constants.Message.TURN_OFF_BACKGROUND\n        }, function() {\n          console.log('Font Removed');\n        });\n    //Display on button\n    fontTDOn.style.display = 'block';\n    fontTDOff.style.display = 'none';\n  }.bind(this));\n};\n\n\ndyslexiaextension.controllers.HomeCtrl.prototype.addFontToUi = function(fontContainer, fontname) {\n  var fontTR = document.createElement('tr');\n  fontContainer.appendChild(fontTR);\n\n  var fontTDName = document.createElement('td');\n  fontTDName.innerHTML = fontname.name;\n  fontTR.appendChild(fontTDName);\n\n  var fontActualTDAdd = document.createElement('td');\n  fontTR.appendChild(fontActualTDAdd);\n\n  var fontTDAdd = document.createElement('button');\n  fontTDAdd.innerHTML = '+';\n  fontActualTDAdd.appendChild(fontTDAdd);\n\n  fontTDAdd.addEventListener('click', function() {\n    console.log(this.parent);\n    this.parent.setFont(fontname.font);\n    this.parent.insertOntoBody();\n  }.bind(this), false);\n\n  var fontActualTDOn = document.createElement('td');\n  fontTR.appendChild(fontActualTDOn);\n\n  var fontTDOn = document.createElement('button');\n  fontTDOn.innerHTML = 'ON';\n  fontTDOn.className = dyslexiaextension.controllers.HomeCtrl.Class.ON_BUTTON;\n  fontActualTDOn.appendChild(fontTDOn);\n\n  if(this.parent.getFont() === fontname.font) {\n    fontTDOn.style.display = 'none';\n  }\n\n  var fontActualTDOff = document.createElement('td');\n  fontTR.appendChild(fontActualTDOff);\n\n  var fontTDOff = document.createElement('button');\n  fontTDOff.innerHTML = 'OFF';\n\n  if(this.parent.getFont() !== fontname.font) {\n    fontTDOff.style.display = 'none';\n  }\n\n  fontTDOff.className = dyslexiaextension.controllers.HomeCtrl.Class.OFF_BUTTON;\n  fontActualTDOff.appendChild(fontTDOff);\n  fontTDOn.addEventListener('click', function() {\n    //Apply now\n    this.parent.setFont(fontname.font);\n    this.parent.insertOntoBody();\n    //Save details\n\n      chrome.runtime.sendMessage({\n          method: dyslexiaextension.constants.Message.TURN_ON_FONT,\n          font: fontname\n        }, function() {\n          console.log('Font Set');\n        });\n\n    //Ensure all other font UIs are set to off\n    var onButtons = document.getElementsByClassName(\n      dyslexiaextension.controllers.HomeCtrl.Class.ON_BUTTON);\n    for(var i = 0; i < onButtons.length; i++) {\n      onButtons[i].style.display = 'block';\n    }\n\n    var offButtons = document.getElementsByClassName(\n      dyslexiaextension.controllers.HomeCtrl.Class.OFF_BUTTON);\n    for(var j = 0; j < offButtons.length; j++) {\n      offButtons[j].style.display = 'none';\n    }\n\n\n    //Display off button\n    fontTDOn.style.display = 'none';\n    fontTDOff.style.display = 'block';\n  }.bind(this));\n\n  fontTDOff.addEventListener('click', function() {\n    this.parent.removeFont();\n\n    chrome.runtime.sendMessage({\n          method: dyslexiaextension.constants.Message.TURN_OFF_FONT\n        }, function() {\n          console.log('Font Removed');\n        });\n    //Display on button\n    fontTDOn.style.display = 'block';\n    fontTDOff.style.display = 'none';\n  }.bind(this));\n};\n\ndyslexiaextension.controllers.HomeCtrl.prototype.setupEmpathyList = function() {\n  var welcomeText = document.createElement('p');\n  welcomeText.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.EMPATHY_WELCOME;\n  this.empathyList.appendChild(welcomeText);\n\n  var fontHeader = document.createElement('h2');\n  fontHeader.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.FONTS;\n  this.empathyList.appendChild(fontHeader);\n\n  var fontHelp = document.createElement('p');\n  fontHelp.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.FONTS_HELP;\n  this.empathyList.appendChild(fontHelp);\n\n  var fontContainer = document.createElement('table');\n  for(var i = 0; i < dyslexiaextension.controllers.HomeCtrl.EMPATHY_FONTS.length; i++) {\n    this.addFontToUi(fontContainer, dyslexiaextension.controllers.HomeCtrl.EMPATHY_FONTS[i]);\n  }\n  this.empathyList.appendChild(fontContainer);\n\n  var scriptHeader = document.createElement('h2');\n  scriptHeader.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.SCRIPTS;\n  this.empathyList.appendChild(scriptHeader);\n\n  var scriptHelp = document.createElement('p');\n  scriptHelp.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.SCRIPTS_HELP;\n  this.empathyList.appendChild(scriptHelp);\n\n  var dyslexiaSimulationButton = document.createElement('button');\n  dyslexiaSimulationButton.innerHTML = dyslexiaextension.controllers.HomeCtrl.Copy.ADD_TO_PAGE;\n  dyslexiaSimulationButton.addEventListener('click', function() {\n\n    var jqueryNode = document.createElement('script');\n    jqueryNode.crossorigin = 'anonymous';\n    jqueryNode.src = chrome.extension.getURL('scripts/helperscripts/jquery-2.2.2.min.js');\n\n    var headID = document.getElementsByTagName('head')[0];\n\n    jqueryNode.onload = function () {\n        //do stuff with the script\n        var scriptNode = document.createElement('script');\n        scriptNode.src = chrome.extension.getURL('scripts/helperscripts/dyslexiasimulation.js');\n        headID.appendChild(scriptNode);\n    };\n\n    headID.appendChild(jqueryNode);\n\n  }, false);\n  this.empathyList.appendChild(dyslexiaSimulationButton);\n\n};\n\n\r\n\r\n\r\nvar dyslexiaextension = dyslexiaextension || {};\r\ndyslexiaextension.modules = dyslexiaextension.modules || {};\r\n\r\ndyslexiaextension.modules.Tts = function() {\r\n    this.voices = null;\r\n    this.voice = null;\r\n    this.canHighlightText = true;\r\n    this.elToRead = null;\r\n    this.elBeingRead = null;\r\n    this.textBeingRead = null;\r\n    this.utterance = null;\r\n    this.lastHoveredEl = null;\r\n    this.buttonEl = null;\r\n    this.buttonShown = false;\r\n};\r\n\r\nconsole.log('Read-To-Me: Loaded extension');\r\n\r\ndyslexiaextension.modules.Tts.PREFERRED_VOICE_NAME = 'Samantha'; // Good choices on OSX: Samantha (direct), Vicki (soft)\r\ndyslexiaextension.modules.Tts.VOICE_SPEED = 0.80;\r\ndyslexiaextension.modules.Tts.HIGHLIGHT_ID = 'read-to-me-highlight';\r\ndyslexiaextension.modules.Tts.HOVER_DURATION_MS = 1200;\r\n\r\n\r\ndyslexiaextension.modules.Tts.init = function() {\r\n  window.speechSynthesis.onvoiceschanged = function() {\r\n    if (this.voices) {\r\n        return;\r\n    }\r\n    console.log('Read-To-Me: Loading voices');\r\n    this.voices = window.speechSynthesis.getVoices();\r\n    console.log('Read-To-Me: Loaded voices'); \r\n    this.runExtension();\r\n  }.bind(this);  \r\n};\r\n\r\n\r\n\r\ndyslexiaextension.modules.Tts.runExtension = function() {\r\n  console.log('Read-To-Me: Running extension');\r\n  this.setVoice();\r\n  this.renderButton();\r\n  this.attachListeners();\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.setVoice = function() {\r\n  if (this.voice) {\r\n    return;\r\n  }\r\n  \r\n  console.log('Read-To-Me: Setting voice');\r\n\r\n  if (!this.voices || this.voices.length === 0) {\r\n    console.log('Read-To-Me: ERROR no voices available.');\r\n    return;\r\n  }\r\n  \r\n  // Try to use the preferred voice.\r\n  var firstLocalVoice = null;\r\n  for (var i = 0; i < this.voices.length; i++) {\r\n    if (this.voices[i].name === dyslexiaextension.modules.Tts.PREFERRED_VOICE_NAME && this.voices[i].localService) {\r\n      this.voice = this.voices[i];\r\n      console.log('Read-To-Me: Using preferred voice ' + dyslexiaextension.modules.Tts.PREFERRED_VOICE_NAME + '.');\r\n      break;\r\n    }\r\n    if (!firstLocalVoice && this.voices[i].localService) {\r\n      firstLocalVoice = this.voices[i];\r\n    }\r\n  }\r\n  \r\n  // Otherwise, use the first local voice. Only local voices provide utterance boundary events.\r\n  if (!this.voice) {\r\n    if (!firstLocalVoice) {\r\n      this.voices = this.voices[i];\r\n      this.canHighlightText = false;\r\n      console.log('Read-To-Me: ERROR no local voices available, text highlights disabled.');\r\n    } else {\r\n      this.voice = this.firstLocalVoice;\r\n      console.log('Read-To-Me: Preferred voice ' + dyslexiaextension.modules.Tts.PREFERRED_VOICE_NAME + ' unavailable. Using ' + this.voice.name + '.');\r\n    }\r\n  }\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.renderButton = function() {\r\n  this.buttonEl = document.createElement('div');\r\n  this.buttonEl.id = 'read-to-me-button';\r\n  document.body.appendChild(this.buttonEl);\r\n};\r\n\r\ndyslexiaextension.modules.Tts.attachListeners = function() {\r\n  console.log('Read-To-Me: Attaching listeners');\r\n  \r\n  this.buttonEl.addEventListener('click', function() {\r\n    this.readEl(this.elToRead);\r\n    this.elToRead = null;\r\n    this.hideButton();\r\n  }.bind(this));\r\n  document.body.addEventListener('mousemove', this.handleMouseMove);  \r\n  window.addEventListener('scroll', function() {\r\n    if (this.buttonShown) { // Quick bool check.\r\n      this.hideButtonFast();\r\n    }\r\n  }.bind(this));\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.handleMouseMove = function(e) {\r\n  // TODO(vagell): Rate limit this handler to improve performance\r\n  var newHoveredEl = document.elementFromPoint(e.clientX, e.clientY);\r\n  if (newHoveredEl === this.lastHoveredEl) {\r\n    return;\r\n  } else {\r\n    this.lastHoveredEl = newHoveredEl;\r\n    var hoveredElAtTimerStart = this.lastHoveredEl;\r\n    window.setTimeout(function() {\r\n      if (this.lastHoveredEl !== hoveredElAtTimerStart &&\r\n        this.lastHoveredEl !== this.buttonEl) {\r\n        // TODO(vagell): Improve this interaciton to remove flicker when rapidly hovering several els.\r\n        this.hideButton();\r\n        return;\r\n      } else {\r\n        var textNode = this.getTextNode(hoveredElAtTimerStart);\r\n        if (textNode) {\r\n          this.showButtonNear(textNode);\r\n        }\r\n      }\r\n    }.bind(this), dyslexiaextension.modules.Tts.HOVER_DURATION_MS);\r\n  }\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.hideButton = function() {\r\n  this.buttonEl.style.opacity = 0;\r\n  this.buttonEl.style.pointerEvents = 'none';\r\n  this.buttonShown = false;\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.hideButtonFast = function() {\r\n  this.buttonEl.style.display = 'none';\r\n  this.buttonEl.style.opacity = 0;\r\n  this.buttonEl.style.pointerEvents = 'none';\r\n  window.setTimeout(function() {\r\n    this.buttonEl.style.display = '';\r\n    this.buttonShown = false;\r\n  }.bind(this), 0);\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.showButtonNear = function(el) {\r\n  var rect = el.parentNode.getBoundingClientRect();\r\n  buttonEl.style.left = rect.left + 'px';\r\n  buttonEl.style.top = rect.top + (rect.height / 2) + 'px';\r\n  buttonEl.style.opacity = 1;\r\n  buttonEl.style.pointerEvents = 'auto';\r\n  \r\n  this.elToRead = el;\r\n  \r\n  this.buttonShown = true;\r\n};\r\n\r\n\r\nvar getTextNode = function(el) {\r\n  if (el.nodeType === Node.TEXT_NODE) {\r\n    return el;\r\n  }\r\n    \r\n  var textNode = null;\r\n  for (var i = 0; i < el.childNodes.length; i++) {\r\n    if (el.childNodes[i].nodeType === Node.TEXT_NODE) {\r\n      return el.childNodes[i];\r\n    }\r\n  }\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.readEl = function(el) {\r\n  // Stop an active reading.\r\n  if (this.utterance) {\r\n    this.utterance.onend = function() {\r\n      this.cleanUp();\r\n      this.readEl(el);\r\n    }.bind(this);\r\n    window.speechSynthesis.cancel();\r\n    return;\r\n  }\r\n  \r\n  if (!el) {\r\n    this.hideButton();\r\n    return;\r\n  }\r\n  \r\n  var textNode = this.getTextNode(el);\r\n  // If this element doesn't directly have text, don't read it. Probably a big container.\r\n  if (!this.textNode) {\r\n    console.log('Read-To-Me: Nothing to read, clicked element and its children have no text nodes.');\r\n    return;\r\n  }\r\n  \r\n  var text = textNode.textContent.trim();\r\n  if (!text || text.length === 0) {\r\n    console.log('Read-To-Me: Nothing to read, clicked element has empty text content.');\r\n    return;\r\n  }\r\n  this.textBeingRead = textNode.textContent;\r\n  this.elBeingRead = textNode;\r\n  \r\n  this.utterance = new SpeechSynthesisUtterance(this.textBeingRead);\r\n  this.utterance.voice = this.voice;\r\n  this.utterance.rate = dyslexiaextension.modules.Tts.VOICE_SPEED;\r\n  this.utterance.onboundary = function(e) {\r\n    this.highlightNextPhrase(e.charIndex);\r\n  }.bind(this);\r\n  this.utterance.onend = function(e) {\r\n    this.cleanUp();\r\n  }.bind(this);\r\n  this.utterance.onerror = function(e) {\r\n    console.log('Read-To-Me: Error while reading.');\r\n    this.cleanUp();\r\n  }.bind(this);\r\n  \r\n  window.speechSynthesis.speak(this.utterance);\r\n};\r\n\r\n\r\n/**\r\n * Resets state to prepare for another read() call.\r\n */\r\ndyslexiaextension.modules.Tts.cleanUp = function() {\r\n  this.removeHighlights();\r\n  this.elBeingRead = null;\r\n  this.textBeingRead = null;\r\n  this.utterance = null;\r\n  this.elToRead = null;\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.removeHighlights = function() {\r\n  if (!canHighlightText) {\r\n    return;\r\n  }\r\n  \r\n  // Note that we query for the highlight rather than store reference, in case the\r\n  // user has changed web app state such that it's gone.\r\n  var highlightSpan = document.querySelector('#' + HIGHLIGHT_ID);\r\n  \r\n  if (!highlightSpan) {\r\n    return;\r\n  }\r\n  \r\n  var parentNode = highlightSpan.parentNode;\r\n  highlightSpan.insertAdjacentHTML('beforebegin', highlightSpan.textContent);\r\n  highlightSpan.remove();\r\n  // TODO(vagell): Figure out why normalize is leaving behind empty text nodes.\r\n  parentNode.normalize();\r\n  \r\n  if (this.utterance) {\r\n    // Reset el being read, since we've mucked with DOM.\r\n    for (var i = 0; i < parentNode.childNodes.length; i++) {\r\n      if (parentNode.childNodes[i].nodeType === Node.TEXT_NODE) {\r\n        elBeingRead = parentNode.childNodes[i];\r\n        break;\r\n      }\r\n    } \r\n  }\r\n};\r\n\r\n\r\ndyslexiaextension.modules.Tts.highlightNextPhrase = function(startIdx) {\r\n  if (!this.canHighlightText) {\r\n    return;\r\n  }\r\n  \r\n  if (!this.utterance) {\r\n    console.log('abort at ' + startIdx);\r\n    return;\r\n  }\r\n  \r\n  this.removeHighlights();\r\n  \r\n  var remainingText = this.textBeingRead.substr(startIdx);\r\n  var endIdx = startIdx + remainingText.search(/[ .!?]/);\r\n  endIdx = endIdx < startIdx ? this.textBeingRead.length : endIdx;\r\n  \r\n  var highlightSpan = document.createElement('span');\r\n  highlightSpan.id = dyslexiaextension.modules.Tts.HIGHLIGHT_ID;\r\n  var range = document.createRange();\r\n  range.setStart(this.elBeingRead, startIdx);\r\n  range.setEnd(this.elBeingRead, endIdx);\r\n  range.surroundContents(highlightSpan);\r\n};\r\n\r\n\n\nvar dyslexiaextension = dyslexiaextension || {};\n\ndyslexiaextension.Content = function() {\n  this.showing = false;\n  //this.font = 'Dyslexia-Extension-OpenDyslexic-Regular';\n  this.font = '';\n};\n\n\ndyslexiaextension.Content.prototype.init = function() {\n  console.log('Init');\n  this.scrappedBody = document.getElementsByTagName('body')[0];\n  this.addComposeListener();\n  this.container = new autocharlie.ui.Container(this.scrappedBody);\n  this.ctrl = new dyslexiaextension.controllers.HomeCtrl(this);\n  //this.ctrl.init();\n  this.container.header.addFeedbackButton();\n  this.container.header.addCloseButton(this.hide.bind(this));\n  //this.container.footer.hide();\n\n  chrome.runtime.sendMessage({\n          method: dyslexiaextension.constants.Message.GET_INIT\n        }, function(response) {\n          console.log('Response');\n          console.log(response);\n          if(response !== '') {\n            this.font = response.font;\n            this.background = response.background;\n            this.reading = response.reading;\n            this.insertOntoBody();\n          } else {\n            this.font = '';\n            this.background = '';\n            this.reading = '';\n          }\n        }.bind(this));\n  this.addListener();\n};\n\ndyslexiaextension.Content.prototype.toggle = function(e) {\n  if(e) {\n    e.stopPropagation();\n  }\n  if(this.showing) {\n    this.hide();\n  } else {\n    this.show();\n  }\n};\n\ndyslexiaextension.Content.prototype.addListener = function() {\n  chrome.runtime.onMessage.addListener(function(request) {\n    if(request && request.method === 'browserActionClicked'){\n      this.toggle();\n    }\n  }.bind(this));\n};\n\ndyslexiaextension.Content.prototype.show = function() {\n  this.showing = true;\n  this.container.show();\n  this.ctrl.init();\n};\n\ndyslexiaextension.Content.prototype.hide = function() {\n  this.showing = false;\n  this.container.hide();\n};\n\ndyslexiaextension.Content.prototype.getEnabled = function() {\n  chrome.runtime.sendMessage({\n    method: dyslexiaextension.constants.Message.GET_ENABLED\n  }, function(response) {\n    if(response) {\n      this.enabled = response.enabled;\n      this.font = response.font;\n    } else {\n      console.log('Error getting codes, please refresh');\n    }\n  }.bind(this));\n};\n\n\ndyslexiaextension.Content.prototype.checkLoad = function() {\n  document.addEventListener('DOMContentLoaded', this.init.bind(this), false);\n};\n\n\ndyslexiaextension.Content.prototype.insertOntoBody = function() {\n  this.insertFontOntoElements(this.scrappedBody);\n};\n\ndyslexiaextension.Content.prototype.insertFontOntoElements = function(element) {\n  if(element) {\n    this.insertFontOntoElement(element);\n    try {\n      var subElements = element.getElementsByTagName('*');\n      for (var i = 0; i < subElements.length; i++) {\n        this.insertFontOntoElement(subElements[i]);\n      }\n    } catch(e) {\n      // Do nothing\n    }\n  }\n};\n\ndyslexiaextension.Content.prototype.setFont = function(font) {\n  this.font = font;\n};\n\ndyslexiaextension.Content.prototype.getFont = function() {\n  return this.font;\n};\n\ndyslexiaextension.Content.prototype.setBackground = function(background) {\n  this.background = background;\n};\n\ndyslexiaextension.Content.prototype.getBackground = function() {\n  return this.background;\n};\n\ndyslexiaextension.Content.prototype.insertFontOntoElement = function(element) {\n var computedStyle = document.defaultView.getComputedStyle(element,null);\n  if(element.style) {\n    if(this.background !== '') {\n      if(computedStyle.backgroundColor === 'rgb(255, 255, 255)') {\n        element.style.backgroundColor = this.background;\n      }\n    }\n    if(this.font === '') {\n      element.removeAttribute('font-family');\n    } else {\n      if(this.font === 'Dyslexia-Extension-DyslexicView') {\n        //element.style.textTransform = 'uppercase';\n      }\n      element.style.fontFamily = this.font;\n    }\n  }\n};\n\ndyslexiaextension.Content.prototype.addComposeListener = function() {\n  document.addEventListener('DOMNodeInserted', this.subtreeModifed.bind(this), false);\n}; //Used to be subtree\n\ndyslexiaextension.Content.prototype.removeFont = function() {\n  this.font = '';\n  this.insertOntoBody();\n};\n\ndyslexiaextension.Content.prototype.removeBackground = function() {\n  this.background = '';\n  this.insertOntoBody();\n};\n\ndyslexiaextension.Content.prototype.subtreeModifed = function(e) {\n  var target = e.target;\n  if(target) {\n   this.insertFontOntoElements(target);\n  }\n};\n\nvar dyslexiaextensionContent = new dyslexiaextension.Content();\ndyslexiaextensionContent.init();"],"sourceRoot":"/source/"}